function track(o,e){var a=new Date,n=a.getDate()+"_"+a.getMonth()+"_"+a.getFullYear(),r="https://fiery-torch-1756.firebaseio.com/errorlogs/"+n,i=new Firebase(r);e.platform=log_currentPlatform,e.platformVersion=log_currentPlatformVersion,i.push(e)}var debug=!1,log_currentPlatform,log_currentPlatformVersion,isApp;angular.module("app",["ionic","ngIOS9UIWebViewPatch","ionic.utils","ngCordova","chart.js","dbaq.ionTimer","ionic-datepicker","ionic-ratings","readinglog.views","app.config","app.GlobalConfig","app.services","app.auth","app.modules"]).config(["$provide",function(o){o.decorator("$exceptionHandler",["$delegate",function(o){return function(e,a){o(e,a);var n={url:window.location.hash};a&&(n.cause=a),e&&(e.message&&(n.message=e.message),e.name&&(n.name=e.name),e.stack&&(n.stack=e.stack)),debug?console.log("exception",n):track("exception",n)}}])}]).run(["$state","$ionicPlatform",function(o,e){window.isMobileApp=!(window.location.origin.indexOf("http")>=0||window.location.origin.indexOf("https")>=0),e.ready(function(){log_currentPlatform=ionic.Platform.platform(),log_currentPlatformVersion=ionic.Platform.version(),window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&(StatusBar.overlaysWebView(!1),ionic.Platform.fullScreen())}),e.registerBackButtonAction(function(e){"auth.welcome"==o.current.name?navigator.app.exitApp():navigator.app.backHistory()},100)}]),window.onerror=function(o,e,a,n,r){var i=debug?!1:!0,t={url:window.location.hash};return o&&(t.message=o),e&&(t.fileName=e),a&&(t.lineNumber=a),n&&(t.columnNumber=n),r&&(r.name&&(t.name=r.name),r.stack&&(t.stack=r.stack)),debug?console.log("exception",t):track("exception",t),i};
!function(){"use strict";angular.module("app.config",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("auth",{url:"/auth",templateUrl:"views/auth/auth.html","abstract":!0}).state("auth.welcome",{url:"/welcome",templateUrl:"views/auth/welcome.html",controller:"appWelcome as welcome"}).state("auth.login",{url:"/login",templateUrl:"views/auth/login.html",controller:"appLogin as login"}).state("auth.signup",{url:"/signup",templateUrl:"views/auth/signup.html",controller:"appSignup as signup"}).state("auth.forgot-password",{url:"/forgot-password",templateUrl:"views/auth/forgot-password.html",controller:"appForgetPassword as forgetPassword"}).state("auth.logout",{url:"/logout",controller:"appLogout as logout",templateUrl:"views/auth/logout.html"}).state("app",{url:"/app","abstract":!0,templateUrl:"views/app/side-menu.html",controller:"appSideMenu as sidemenu",authRequired:!0,resolve:{user:["appUserService",function(e){return e.getUserInfo()}]}}).state("app.booklogform",{url:"/booklogform/:edit",views:{menuContent:{templateUrl:"views/app/readnow.html",controller:"appReadNow as readNow"}},authRequired:!0}).state("app.stats",{url:"/stats",views:{menuContent:{templateUrl:"views/app/stats.html",controller:"appStats as stats"}}}).state("app.viewall",{url:"/viewall/all",views:{menuContent:{templateUrl:"views/app/viewall.html",controller:"appViewAll as viewall"}}}).state("app.viewgenres",{url:"/viewgenres",views:{menuContent:{templateUrl:"views/app/genre.html",controller:"appViewGenres as viewgenres"}}}).state("app.booksbygenre",{url:"/viewall/:genreId",views:{menuContent:{templateUrl:"views/app/viewall.html",controller:"appViewAll as viewall"}}}).state("app.weeklylog",{url:"/weeklylog",views:{menuContent:{templateUrl:"views/app/weeklylog.html",controller:"appWeeklyLog as weeklylog"}}}).state("app.settings",{url:"/settings",views:{menuContent:{templateUrl:"views/app/settings.html",controller:"appSettings as settings"}}}).state("app.feedback",{url:"/feedback",views:{menuContent:{templateUrl:"views/app/feedback.html",controller:"appFeedback as feedback"}}}),t.otherwise("/auth/welcome")}])}();
Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e};
angular.module("app.GlobalConfig",[]).service("appGlobalConfigService",function(){return{genres:[{name:"Non Fiction",value:"NF",img:"nonfiction.png"},{name:"Realistic Fiction",value:"RF",img:"Realistic Fiction.png"},{name:"Historical Fiction",value:"HF",img:"Historical Fiction.png"},{name:"Fiction",value:"FT",img:"fiction.png"},{name:"Science Fiction/Fantasy",value:"SF",img:"Fantasy.png"},{name:"Poetry",value:"P",img:"Poetry.png"},{name:"Mystery",value:"M",img:"Mystery.png"},{name:"Biography",value:"B",img:"biograpphy.png"}],readWays:[{name:"I read by myself",value:1,icon:"ion-android-contact"},{name:"I read with help",value:2,icon:"ion-android-contacts"},{name:"I actively listened",value:3,icon:"ion-headphone"}],grades:[{name:"Pre K",value:"prek"},{name:"Kindergarten",value:"k"},{name:"1st Grade",value:"1"},{name:"2nd Grade",value:"2"},{name:"3rd Grade",value:"3"},{name:"4th Grade",value:"4"},{name:"5th Grade",value:"5"},{name:"6th Grade",value:"6"},{name:"Would rather not tell",value:"other"}],schools:[{name:"Hawthorne Scholastic Academy",value:"Hawthorne",teachers:[{name:"Mr. Blake",value:"blake"},{name:"Ms. Bice",value:"bice"},{name:"Ms. Thomas",value:"thomas"}]},{name:"Skinner West Elementary School",value:"Skinner",teachers:[]}],constants:{GoogleApiSearchType:{isbn:"isbn",title:"title"},ModalTypes:{timer:"timer",stopwatch:"stopwatch",timeform:"timeform",scan:"scan",search:"search",bookform:"bookform"}}}});
angular.module("ionic.utils",[]).factory("$localstorage",["$window",function(t){return{set:function(o,n){t.localStorage[o]=n},get:function(o,n){return t.localStorage[o]||n},setObject:function(o,n){t.localStorage[o]=JSON.stringify(n)},getObject:function(o){return JSON.parse(t.localStorage[o]||"{}")}}}]);
angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function(n){"use strict";n.decorator("$browser",["$delegate","$window",function(n,e){function t(n){return/(iPhone|iPad|iPod).* OS 9_\d/.test(n)&&!/Version\/9\./.test(n)}function r(n){function e(){t=null}var t=null,r=n.url;return n.url=function(){return arguments.length?(t=arguments[0],r.apply(n,arguments)):t||r.apply(n,arguments)},window.addEventListener("popstate",e,!1),window.addEventListener("hashchange",e,!1),n}return t(e.navigator.userAgent)?r(n):n}])}]);
angular.module("readinglog.views",[]).run(["$templateCache",function(n){n.put("views/app/feedback.html",'<ion-view>\n    <ion-nav-buttons side="left">\n        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\n    </ion-nav-buttons>\n    <ion-nav-title>\n        <span>Please help us get better!</span>\n    </ion-nav-title>\n    <ion-content>\n        <form class="css-form" novalidate ng-submit="feedback.onSubmit(userForm.$valid)" name="userForm">\n            <div class="card">\n                <div class="item item-divider">         \n                    Please send your questions, comments, suggestions below, we love your feedback! Thanks!!!\n                </div>\n\n                <div class="row">\n                    <label class="item item-input">\n                        <textarea placeholder="comments" rows="30" cols="75"\n                                  ng-model="feedback.comments" ng-Required="true" name="comments"></textarea>\n                    </label>\n                </div>\n            </div>\n            <div class="card">\n\n                <div class="row">\n                    <div class="item item-body bottom-content">\n                        <button type="submit" class="button button-assertive" ng-disabled="userForm.$invalid">\n                            Sumbit\n                        </button>\n                    </div>\n                </div>\n           </div>\n</form>\n</ion-content>\n</ion-view>'),n.put("views/app/genre.html",'<ion-view class="feeds-categories-view">\n    <ion-nav-title>\n        <span>Book Genres</span>\n    </ion-nav-title>\n    <ion-content>\n        <div class="row categories-list">\n            <div ng-repeat="genre in viewgenres.genres">\n                <a class="feed-category"  ui-sref="app.booksbygenre({genreId: (genre.value)})" >\n                    <img class="category-image" ng-src="img/{{genre.img}}">\n                    <div class="category-bg"></div>\n                    <span class="category-title">{{genre.name}}</span>\n                </a>\n            </div>\n           </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/app/readnow.html",'<ion-view cache-view="false">\n    <ion-nav-title>\n        <span>Read A Book Now</span>\n    </ion-nav-title>\n    <ion-content class="padding">\n\n        <div class="card">\n            <div class="item item-divider">Book</div>\n            <div class="row">\n                <div class="col" ng-if="readNow.isMobileApp">\n                    <div ng-click="readNow.showModal(readNow.modalTypes.scan)"> \n                        <i class="icon ion-qr-scanner"> Scan</i></div>\n                </div>\n                <div class="col">\n                    <div ng-click="readNow.showModal(readNow.modalTypes.search)"> \n                        <i class="icon ion-search"> Search</i></div>\n                </div>\n                <div class="col">\n                    <div ng-click="readNow.showModal(readNow.modalTypes.bookform)">\n                        <i class="icon ion-edit"> Type it</i> </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="card">\n            <div class="item item-divider">Time</div>\n            <div class="row">\n                <div class="col">\n                    <div ng-click="readNow.showModal(readNow.modalTypes.stopwatch)">\n                        <i class="icon ion-ios-stopwatch-outline"> StopWatch</i>\n                    </div>\n                </div>\n                <div class="col">\n                    <div ng-click="readNow.showModal(readNow.modalTypes.timer)">\n                        <i class="icon ion-ios-time"> Timer</i>\n                    </div>\n                </div>\n                <div class="col">\n                    <div ng-click="readNow.showModal(readNow.modalTypes.timeform)">\n                        <i class="icon ion-edit"> Type it</i>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="list card" ng-show="readNow.book && readNow.book.title">\n\n            <div class="item item-body item-text-wrap">\n                <h2>{{readNow.book.title}}</h2>\n                <p>{{readNow.readingTimeStats.date}}</p>\n                <p>Reading Time: {{readNow.readingTimeStats.timeRead}} minutes</p>\n            </div>\n\n            <div class="item item-body item-text-wrap">\n                <img ng-src="{{readNow.book.smThumbnail}}" ng-show="readNow.book.smThumbnail.length>0" style="float:right">\n                <p class="left" ng-show="readNow.book.description.length>0">\n                    {{readNow.book.description}}\n                </p>\n            </div>\n        </div>\n\n        <div class="card">\n\n            <div class="item item-divider">Rating</div>\n            <div class="item">\n                <ionic-ratings ratingsobj=\'readNow.ratingsObject\'></ionic-ratings>\n            </div>\n        </div>\n        <div class="card">\n            <div class="item item-divider">Please select</div>\n\n            <label class="item item-input item-select">\n                    Genre\n                <select ng-model="readNow.genre">\n                    <option ng-repeat="item in readNow.bookCategories"\n                            value="{{item.value}}" ng-selected="{{item.value == readNow.genre}}">\n                        {{item.name}}\n                    </option>\n                </select>\n            </label>\n        </div>\n        <div class="card">\n\n            <div class="item item-divider">Please choose from the following</div>\n            <ion-list>\n                <ion-radio ng-repeat="item in readNow.readWays" \n                       ng-value="{{item.value}}" \n                       ng-model="readNow.readingHow">\n                       <i class="icon {{item.icon}}"></i> {{item.name}}\n                </ion-radio>\n            </ion-list>\n        </div>\n\n        <div>\n            <div class="item item-body bottom-content">\n                <button type="submit" class="button button-assertive" ng-click="readNow.onSubmit()">\n                    Submit\n                </button>\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/app/settings.html",'<ion-view class="settings-view">\n    <ion-nav-buttons side="left">\n        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\n    </ion-nav-buttons>\n\n    <ion-nav-title>\n        <span>Settings</span>\n    </ion-nav-title>\n\n    <ion-content>\n        <form class="css-form" novalidate ng-submit="settings.saveUserInfo(userForm.$valid)" name="userForm">\n\n            <div class="card">\n                <div class="item item-divider">Some info about you</div>\n                <div class="item item-avatar padding">\n                    <a  ng-show="settings.user.avartar" ng-click="settings.selectImage()"><img ng-src="{{settings.user.avartar}}" width="80" /></a>\n                    <a ng-show="!settings.user.avartar" ng-click="settings.selectImage()"><img ng-src="img/user/user.png" width="80" /></a>\n                </div>\n                <label class="item item-input">\n                    <input type="text" placeholder="Name" name="user_name" ng-model="settings.user.username" required>\n                </label>\n                <label class="item item-input item-select">\n                    <div class="input-label">\n                        Grade\n                    </div>\n                    <select ng-model="settings.user.grade">\n                        <option ng-repeat="grade in settings.grades" value="{{grade.value}}">{{grade.name}}</option>\n                    </select>\n                </label>\n            </div>\n\n            <div class="card">\n\n                <div class="item item-divider">Parent Form</div>\n                <div class="item item-body">\n                    <label class="item item-input">\n                        <input type="email" placeholder="Email" name="parent_email" ng-model="settings.user.parentemail" required>\n                    </label>\n                    <label class="item item-input" style="display:none">\n                        <input type="text" placeholder="Phone number" name="parent_phone" ng-model="settings.user.parentphone">\n                    </label>\n                </div>\n            </div>\n\n\n            <div>\n                <div class="item item-divider">Classroom Information</div>\n                <div class="item item-body">\n                    <label class="item item-input item-select">\n                        <div class="input-label">\n                            School\n                        </div>\n                        <select ng-options="school as school.name for school in settings.schools"\n                                ng-model="settings.school"\n                                ng-change="settings.setSchoolTeachers()"></select>\n                    </label>\n                </div>\n\n                <div class="item item-body" ng-show="settings.teachers.length>0">\n                    <label class="item item-input item-select">\n                        <div class="input-label">\n                            Teacher\n                        </div>\n                        <select ng-options="teacher as teacher.name for teacher in settings.teachers"\n                                ng-model="settings.teacher" ></select>\n                    </label>\n                </div>\n\n                <div class="item item-body bottom-content">\n                    <button type="submit" class="button button-assertive" ng-disabled="userForm.$invalid">Sumbit</button>\n                </div>\n            </div>\n        </form>\n    </ion-content>\n</ion-view>\n'),n.put("views/app/side-menu.html",'<ion-side-menus enable-menu-with-back-views="false">\n    <ion-side-menu-content class="post-size-14px">\n        <ion-nav-bar class="bar app-top-bar">\n            <ion-nav-back-button>\n            </ion-nav-back-button>\n            <ion-nav-buttons side="left">\n                <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>\n            </ion-nav-buttons>\n        </ion-nav-bar>\n        <ion-nav-view name="menuContent"></ion-nav-view>\n    </ion-side-menu-content>\n\n    <ion-side-menu side="left" class="main-menu" expose-aside-when="(min-width:1024px)">\n        <ion-content>\n            <ion-list>\n                <ion-item class="heading-item item item-avatar" nav-clear menu-close  ui-sref="app.settings">\n                    <div class="user-image-container">\n                 \n                            <img class="user-image" ng-src="{{sidemenu.user.avartar || \'img/user/user.png\'}}">\n\n                    </div>\n                    <h2 class="greeting">Hi, {{sidemenu.user.username || \'You\'}}</h2>\n                </ion-item>\n                \n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.booklogform" >\n                    <i class="icon ion-ios-book"></i>\n                    <h2 class="menu-text">Read Now</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.viewall">\n                    <i class="icon ion-ios-albums"></i>\n                    <h2 class="menu-text">View All</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.viewgenres">\n                    <i class="icon ion-image"></i>\n                    <h2 class="menu-text">View Genres</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.stats">\n                    <i class="icon ion-ios-pie"></i>\n                    <h2 class="menu-text">Stats</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.weeklylog">\n                    <i class="icon ion-printer"></i>\n                    <h2 class="menu-text">Weekly</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.settings">\n                    <i class="icon ion-gear-a"></i>\n                    <h2 class="menu-text">Settings</h2>\n                </ion-item>\n             \n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="auth.logout">\n                    <i class="icon ion-locked"></i>\n                    <h2 class="menu-text">Logout</h2>\n                </ion-item>\n\n\n            </ion-list>\n        </ion-content>\n    </ion-side-menu>\n</ion-side-menus>\n'),n.put("views/app/stats.html",'<ion-view>\n   \n        <ion-nav-buttons side="left">\n            <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\n        </ion-nav-buttons>\n        <ion-nav-buttons side="right">\n      <button class="button button-clear" ng-click="stats.setTimeMode(\'weekly\');">\n                <img src="img/weekly.png" width="40" height="40" style="margin-top:-5px" />\n      </button>\n     <button class="button button-clear" ng-click="stats.setTimeMode(\'monthly\');">\n                <img src="img/monthly.png" width="40"  height="40" style="margin-top:-5px"/>\n        </button>\n      <button class="button button-clear" ng-click="stats.setTimeMode(\'yearly\');">\n                <img src="img/recent.png"  width="40"  height="40" style="margin-top:-5px"/>\n    </button>\n    </ion-nav-buttons>\n\n   <ion-content  class="has-header">\n        <div ng-show="!stats.allBooksRead || stats.allBooksRead.length===0">\n           <p class="text-center"> Looks like you have not read any books!</p>\n           <a class="button button-clear button-block" ui-sref="app.booklogform">\n                 <h3>  Read Now</h3>\n             </a>\n        </div>      \n        <div ng-show="stats.allBooksRead && stats.allBooksRead.length>0">\n            <label class="item item-input item-select" ng-show="stats.mode == \'weekly\'">\n                <div class="input-label">\n                    Time Period:\n                </div>\n                <select ng-options="week as week.name for week in stats.weeks"\n                        ng-model="stats.weekselected" ng-change="stats.rechart()"></select>\n            </label>\n            <label class="item item-input item-select" ng-show="stats.mode == \'monthly\'">\n                <div class="input-label">\n                    Time Period:\n                </div>\n                <select ng-options="month as month.name for month in stats.months"\n                        ng-model="stats.monthselected" ng-change="stats.rechart()"></select>\n            </label>\n            <!-- Pie chart-->\n            <div class="card">\n                <div class="item item-divider">\n                    Daily Reading Time\n                </div>\n                <div class="item item-text-wrap">\n                    <canvas id="line" class="chart chart-line" data="stats.chartReadingData.data" labels="stats.chartReadingData.labels" legend="false"\n                            series="[\'timeread\']" chart-options="{showTooltips: false}"></canvas>\n\n                </div>\n            </div>\n\n          \n            <div class="card">\n                <div class="item item-divider">\n                    Time Read By Genre\n                </div>      \n                <div class="item item-text-wrap">\n                    <canvas id="bar" class="chart chart-bar" data="stats.chartGenreData.data" \n                            labels="stats.chartGenreData.labels" legend="false" series="[\'genre\']" chart-options="{showTooltips: false}">\n                    </canvas>\n                </div>\n\n                <div class="item item-divider ">\n                </div>\n            </div>\n            \n            \n        </div>\n        </ion-content>\n</ion-view>\n'),n.put("views/app/viewall.html",'<ion-view class="settings-view"  cache-view="false">\n\n    <ion-nav-title>\n        <span>Books </span><span ng-show="viewall.genreName  && viewall.genreName.length>0">in {{viewall.genreName}}</span>\n    </ion-nav-title>\n    <ion-nav-buttons side="secondary">\n        <button class="button button-icon icon ion-ios-search-strong" ng-click="viewall.showFilterBar()"></button>\n    </ion-nav-buttons>\n\n    <ion-content direction="y" scrollbar-y="false">\n\n        <div ng-show="viewall.error"><h3>{{viewall.error}}</h3></div>\n        <ion-list>\n\n            <ion-item ng-repeat="item in viewall.booklogs | orderBy: \'-timestamp\'">\n                <div class="item item-thumbnail-left">\n                    <img ng-src="{{item.smThumbnail}}" />\n                    <h2> {{item.title}}</h2>\n                    <p>\n                       {{item.readMannerName}}\n                    </p>\n                    <p>\n                       Date: {{item.dateRead}} \n                    </p>\n                    <p> Reading Time: {{item.timeRead}} minutes\n                    </p>\n                    <p>\n                      Genre:  {{item.genreName}}\n                    </p>\n                    <div class="clearfix">\n                        <a ng-click="viewall.editLog(item)"><i class="ion-edit" style="position:absolute;left:10px;top:100px; color:#ff4c4c; font-size:24px"></i></a>\n                        <a ng-click="viewall.removeLog(item)"><i class="ion-trash-a" style="position:absolute;left:40px;top:100px;color:#ff4c4c; font-size:24px"></i></a>\n                </div>\n                </div>\n            </ion-item>\n        </ion-list>\n        <div ng-if="viewall.booklogs !== undefined && !viewall.booklogs.length" class="no-results">\n            <p>No Results</p>\n        </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/app/weeklylog.html",'\n<ion-view cache-view="false">\n    <ion-nav-buttons side="left">\n        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\n    </ion-nav-buttons>\n    <ion-nav-buttons side="right">\n      <button class="button button-clear" ng-print print-element-id="print-log">\n                <i class="icon ion-printer positive"></i>\n      </button>\n      <button ng-click="weeklylog.sendEmail()" class="button button-clear">\n                <i class="icon ion-ios-email positive"></i>\n      </button>\n    </ion-nav-buttons>\n    <ion-nav-title>\n        <span>Weekly Log</span>\n    </ion-nav-title>\n\n    <ion-content>\n\n        <ion-scroll style="width: 100%; height: 100%" direction="xy">\n            <table style="width: 1025px; position: absolute; left: 20px; top: 20px;border:1px solid #ccc;border-collapse: collapse" id="print-log">\n                <thead>\n                    <tr>\n                        <td colspan="2" style="border-bottom:1px solid #ccc; border-collapse: collapse;height: 30px; text-align: center;vertical-align: middle">\n                            <h3 style="float: left">Name: {{weeklylog.username}}</h3>\n                        </td>\n                        <td colspan="4" style="border-bottom:1px solid #ccc; border-collapse: collapse;height: 30px; text-align: center;vertical-align: middle">\n                            <h3>Week of: {{weeklylog.lastWeekDate}}</h3>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td width="75px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"></td>\n                        <td width="400px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>Title & Author</h4></td>\n                        <td width="100px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>Genre *</h4></td>\n                        <td width="150px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>Rating</h4></td>\n                        <td width="150px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>I Read</h4></td>\n                        <td width="150px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>Reading Time</h4></td>\n\n                    </tr>\n                </thead>\n                <tbody ng-repeat="data in weeklylog.booksReadWeekly">\n                    <tr ng-repeat="book in data.books">\n                        <td ng-if="$index===0" width="75px" rowspan="{{data.books.length}}"\n                            style="border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; border-collapse: collapse;">\n                            {{data.name}}\n                        </td>\n\n                        <td width="400px" style="border-right:1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\n                            <span ng-if="book.title">{{book.title}}</span>\n                            <span ng-if="!book.title">&nbsp;</span>\n                        </td>\n                        <td width="100px" style="border-right: 1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\n                            <span ng-if="book.genre">{{book.genre}}</span>\n                            <span ng-if="!book.genre">&nbsp;</span>\n                        </td>\n                        <td width="150px" style="border-right:1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\n                            <span ng-repeat="i in book.starsArr track by $index"><img src="img/brown-star.png" width="15px"></img></span><span ng-repeat="i in book.nonStarsArr track by $index"><img src="img/empty-star.png" width="15px"></img></span>\n                        </td>\n                        <td width="150px" style="border-right: 1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\n                            <span ng-if="book.howIRead">{{book.howIRead}}</span>\n                            <span ng-if="!book.howIRead">&nbsp;</span>\n                        </td>\n                        <td width="150px" style="border-right:1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\n                            <div>Minutes: {{book.timeRead}}\n                            </div>\n                            <div>\n                            Parent Signature:\n                            <p>&nbsp;</p>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n\n                <tfoot>\n                    <tr>\n                        <td colspan="6" style="vertical-align: middle">\n                            <h1 >Total Minutes:<span style="font-size: 30px;color:red"> {{weeklylog.totalminutes}}</span></h1>\n                      </td>\n                    </tr>\n                    <tr>\n\n                        <td colspan="6" style="word-wrap: break-word">\n                            <span ng-repeat="genre in weeklylog.genres">\n                                * ({{genre.value}}) {{genre.name}}\n                            </span>\n                        </td>\n                    </tr>\n\n                </tfoot>\n            </table>\n        </ion-scroll>\n    </ion-content>\n</ion-view>\n'),n.put("views/auth/auth.html",'<ion-nav-view class="auth-outer">\n    \n</ion-nav-view>\n'),n.put("views/auth/forgot-password.html",'<ion-view class="auth-view" cache-view="false">\n    <ion-nav-bar class="view-navigation">\n        <ion-nav-back-button>\n        </ion-nav-back-button>\n        <ion-nav-title>\n            <span>Reset your password</span>\n        </ion-nav-title>\n    </ion-nav-bar>\n    <ion-content class="padding">\n        <div class="row related-navigation">\n            <div class="col">\n                <a class="nav-left button button-clear" ui-sref="auth.login">\n                    Log In\n                </a>\n                <a class="nav-right button button-clear" ui-sref="auth.signup">\n                    Sign Up\n                </a>\n            </div>\n        </div>\n        <div class="row related-copy">\n            <div class="col">\n                <h5>Please enter your email address and we\'ll send you an email to reset your password.</h5>\n            </div>\n        </div>\n        <div class="row form-wrapper">\n            <div class="col">\n                <form name="forgot_password_form" class="" novalidate>\n                    <div class="form-fields-outer list list-inset">\n                        <label class="item item-input">\n                            <input type="email" placeholder="Email" name="email" ng-model="forgetPassword.user.email" required>\n                        </label>\n                    </div>\n                    <button type="submit" class="sign-up button button-block" ng-click="forgetPassword.requestNewPassword()" ng-disabled="forgot_password_form.$invalid">\n                        Reset Password\n                    </button>\n                    <p ng-show="forgetPassword.msg" class="message error">{{forgetPassword.msg}}</p>\n                </form>\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/auth/login.html",'<ion-view class="auth-view" cache-view="false">\n    <ion-nav-bar class="view-navigation">\n        <ion-nav-back-button>\n        </ion-nav-back-button>\n        <ion-nav-title>\n            <span>Log In</span>\n        </ion-nav-title>\n    </ion-nav-bar>\n    <ion-content class="padding">\n        <div class="row related-navigation">\n            <div class="col">\n                <a class="nav-left button button-clear" ui-sref="auth.forgot-password">\n                    Forgot Password\n                </a>\n                <a class="nav-right button button-clear" ui-sref="auth.signup">\n                    Sign Up\n                </a>\n            </div>\n        </div>\n        <div class="row form-wrapper">\n            <div class="col">\n                <form name="login_form" class="" novalidate>\n                    <div class="form-fields-outer list list-inset">\n                        <label class="item item-input">\n                            <input type="email" placeholder="Email" name="email" ng-model="login.user.email" required>\n                        </label>\n                        <label class="item item-input" show-hide-container>\n                            <input type="password" placeholder="Password" name="password" ng-model="login.user.password" required show-hide-input>\n                        </label>\n                    </div>\n                    <button type="submit" class="log-in button button-block" ng-click="login.doLogIn()" ng-disabled="login_form.$invalid">\n                        Log In\n                    </button>\n                    <p ng-show="login.error" class="message error">{{login.error}}</p>\n                </form>\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/auth/logout.html",'<ion-view class="auth-view" cache-view="false">\n    <ion-nav-bar class="view-navigation">\n        <ion-nav-title>\n            <span>Log out</span>\n        </ion-nav-title>\n    </ion-nav-bar>\n    <ion-content class="padding">\n        <div class="row form-wrapper">\n            <div class="col col-center">\n                  <h2 class="text-center">You are logged out!</h2>\n            </div>\n        </div>\n        <div class="row">\n            <button class="button button-clear button-block" ui-sref="auth.welcome">\n                <h2>Log In</h2>\n            </button>\n        </div>\n\n    </ion-content>\n</ion-view>\n'),n.put("views/auth/signup.html",'<ion-view class="auth-view" cache-view="false">\n    <ion-nav-bar class="view-navigation">\n        <ion-nav-back-button>\n        </ion-nav-back-button>\n        <ion-nav-title>\n            <span>Sign Up with Email</span>\n        </ion-nav-title>\n    </ion-nav-bar>\n    <ion-content class="padding">\n        <div class="row related-navigation">\n            <div class="col">\n                <a class="nav-right button button-clear" ui-sref="auth.login">\n                    Log In\n                </a>\n            </div>\n        </div>\n        <div class="row form-wrapper">\n            <div class="col">\n                <form name="signup_form" class="" novalidate>\n                    <div class="form-fields-outer list list-inset">\n                        <label class="item item-input">\n                            <input type="email" placeholder="Email" name="email" ng-model="signup.user.email" required>\n                        </label>\n                        <label class="item item-input" show-hide-container>\n                            <input type="password" placeholder="Password" name="password" ng-model="signup.user.password" required show-hide-input>\n                        </label>\n                        <!--<label class="item item-input">\n                            <input type="text" placeholder="First Name" name="first_name" ng-model="user.first_name" required>\n                        </label>\n                        <label class="item item-input">\n                            <input type="text" placeholder="Last Name" name="last_name" ng-model="user.last_name" required>\n                        </label>-->\n                    </div>\n                    <button type="submit" class="sign-up button button-block" ng-click="signup.doSignUp()" ng-disabled="signup_form.$invalid">\n                        Sign Up\n                    </button>\n                    <p ng-show="signup.error" class="message error">{{signup.error}}</p>\n                </form>\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/auth/welcome.html",'<ion-view class="welcome-view" cache-view="false">\n    <ion-content scroll="false">\n        <div class="top-content row">\n            <div class="app-copy col col-center">\n                <h1 class="app-logo">Reading Log</h1>\n            </div>\n        </div>\n        <div ng-show="welcome.logging" style="position:absolute;top:40%;left:40%;">\n            <img src="img/giphy.gif" />\n        </div>\n        <div class="bottom-content row">\n            <div class="col col-bottom">\n                <a class="google-sign-in button button-block icon-left ion-social-google" ng-click="welcome.googleSignIn()">\n                    <span class="btn-copy">Google</span>\n                </a>\n                <a class="facebook-sign-in button button-block icon-left ion-social-facebook" ng-click="welcome.facebookSignIn()">\n                    <span class="btn-copy">Facebook</span>\n                </a>\n                <div class="row split-actions">\n                    <div class="col">\n                        <a class="button button-block button-balanced" ui-sref="auth.signup">\n                            Sign Up\n                        </a>\n                    </div>\n                    <div class="col">\n                        <a class="button button-block button-balanced" ui-sref="auth.login">\n                            Log In\n                        </a>\n                    </div>\n                </div>\n            <div class="row">\n                <p class="button button-clear button-block message error" ng-show="welcome.error" >{{welcome.error}}</p>\n            </div>\n           </div>\n        </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/directives/bookitem.html",'\n<div class="item item-body item-text-wrap" ng-show="bookInfo != null" >\n    <div class="book-item" style="position:relative">\n        <h3 class="title">\n            {{bookInfo.title}} <br />\n            <h6>By: {{bookInfo.authors}}</h6>\n        </h3>\n        <div style="max-height:90%;overflow:auto">\n            <a href="{{bookInfo.previewLink}}" style="float:right; margin:0 10px">\n                <img ng-src="{{bookInfo.smThumbnail}}">\n            </a>\n            <div>{{bookInfo.description}}</div>\n        </div>\n    </div>\n</div>\n'),
n.put("views/modal/bookentry.html",'<ion-modal-view class="modal" ng-controller="appBookEntry as bookEntry" class="full-size">\n    <ion-header-bar class="bar-balanced">\n        <h1 class="title">Log my book</h1>\n        <div class="button button-clear" ng-click="bookEntry.closeBookEntryModal()"><span class="icon ion-close"></span></div>\n    </ion-header-bar>\n    <ion-content>\n        <label class="item item-input full-size">\n            <input type="text" required placeholder="Book Title" ng-model="bookEntry.title">\n        </label>\n    </ion-content>\n    <ion-footer-bar class="bar-balanced"  align-title="center">\n        <div class="title" ng-click="setBookInfo(null, bookEntry.title, bookEntry.authorname);bookEntry.closeBookEntryModal()">Ok</div>\n    </ion-footer-bar>\n</ion-modal-view>'),n.put("views/modal/bookscan.html",'<ion-modal-view class="full-size" ng-controller="appBookScan as bookscan" >\n    <ion-header-bar class="bar-balanced">\n        <h1 class="title">Book Scan</h1>\n        <div class="button button-clear" ng-click="bookscan.closebookScanModal()"><span class="icon ion-close"></span></div>\n    </ion-header-bar>\n    <ion-content>\n        <a ng-click="bookscan.scanMyBookNow()" class="text-center">\n            <img src="img/barcodescanner.png" style="display:block;margin-left:auto;margin-right:auto"/> \n            <h4>Scan Your Book</h4>\n        </a>\n      \n        <div class="card">\n            <div class="item item-text-wrap">\n                {{bookscan.scanResults.text}}\n            </div>\n            <bookitem book-info="bookscan.bookInfo" ng-if="bookscan.bookInfo"></bookitem>\n        </div>\n    </ion-content>\n    <ion-footer-bar class="bar-balanced" align-title="center">\n        <div class="title" ng-click="setBookInfo(bookscan.bookInfo);bookscan.closebookScanModal()">Ok</div>\n    </ion-footer-bar>\n</ion-modal-view>\n'),n.put("views/modal/booksearch.html",'<ion-modal-view ng-controller="appBookSearch as bookSearch" class="full-size">\n    <ion-header-bar class="bar-balanced">\n        <h1 class="title">Search your book</h1>\n        <div class="button button-clear" ng-click="bookSearch.closebookSearchModal()"><span class="icon ion-close"></span></div>\n    </ion-header-bar>\n    <ion-content>\n\n            <div class="item item-input">\n                <i class="icon ion-search placeholder-icon"></i>\n                <input type="search" placeholder="Search your book by title"\n                       ng-model="bookSearch.query"\n                       required\n                       ng-change="bookSearch.getBookTitles()">\n            </div>\n            <div class="list" ng-show="bookSearch.searchResultTitles.length>0">\n                <li class="item  item-thumbnail-left" ng-repeat="title in bookSearch.searchResultTitles"\n                    ng-click="bookSearch.setBookTitleAndSearch(title.title)"><img ng-src="{{title.thumbnail}}" height="35" /> {{title.title}}</li>\n            </div>\n            <div class="card" ng-show="bookSearch.bookInfo != null">\n                <bookitem book-info="bookSearch.bookInfo"></bookitem>\n            </div>\n\n        </ion-content>\n    <ion-footer-bar class="bar-balanced" align-title="center">\n        <div class="title" ng-click="setBookInfo(bookSearch.bookInfo);bookSearch.closebookSearchModal()">Ok</div>\n   </ion-footer-bar>\n</ion-modal-view>'),n.put("views/modal/stopwatch.html",'<ion-modal-view class="full-size" ng-controller="appStopWatch as stopWatch">\n    <ion-header-bar class="bar-balanced">\n        <h1 class="title">Stop Watch</h1>\n        <div class="button button-clear" ng-click="stopWatch.closeStopWatchModal()"><span class="icon ion-close"></span></div>\n    </ion-header-bar>\n    <ion-content>\n        <div class="card padding">\n\n            <div class="row padding">\n                <div class="col center">\n                    <h1 class="stop-watch">\n                        <basictimer interval="1000" autostart="false">\n                        {{hhours}} : {{mminutes}} : {{sseconds}} \n                        </basictimer>\n                    </h1>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col center">\n                    <a class="button button-icon icon ion-trash-b" ng-click="stopWatch.resetTimer()"></a>\n                </div>\n                <div class="col center">\n                    <a class="button icon ion-play button-assertive" ng-click="stopWatch.startTimer()" ng-show="!timerRunning || $scope.timerPaused"></a>\n                    <a class="button icon ion-pause button-assertive" ng-click="stopWatch.stopTimer()" ng-show="timerRunning"></a>\n                </div>\n\n            </div>\n        </div>\n    </ion-content>\n    <ion-footer-bar class="bar-balanced" align-title="center">\n        <div class="title" ng-click="stopWatch.setTimeInfo();stopWatch.closeStopWatchModal()">Ok</div>\n    </ion-footer-bar>\n</ion-modal-view>'),n.put("views/modal/timeform.html",'<ion-modal-view class="full-size" ng-controller="appTimeForm as timeForm">\n    <ion-header-bar class="bar-balanced">\n        <h1 class="title">Log my time in reading</h1>\n        <div class="button button-clear" ng-click="timeForm.closeTimeFormModal()"><span class="icon ion-close"></span></div>\n    </ion-header-bar>\n    <ion-content>\n\n            <div class="row">\n                <ionic-datepicker idate="currentDate"\n                                  disablepreviousdates="false"\n                                  disablefuturedates="true"\n                                  callback="timeForm.datePickerCallback"\n                                  title="title">\n                    <button class="button button-block button-positive"> {{ currentDate | date:\'dd - MMMM - yyyy\' }} </button>\n                </ionic-datepicker>\n            </div>\n            <div class="row">\n                <label class="item item-input full-size">\n                    <input type="number" required placeholder="Reading minutes"\n                           ng-model="timeForm.minutes">\n                </label>\n            </div>\n    </ion-content>\n    <ion-footer-bar class="bar-balanced" align-title="center">\n        <div class="title" ng-click="timeForm.setTimeInfo( );timeForm.closeTimeFormModal()">Ok</div>\n    </ion-footer-bar>\n</ion-modal-view>\n'),n.put("views/modal/timer.html",'<ion-modal-view class="full-size" ng-controller="appTimer as timer">\n    <ion-header-bar class="bar-balanced">\n        <h1 class="title">Timer</h1>\n        <div class="button button-clear" ng-click="timer.closeTimerModal()"><span class="icon ion-close"></span></div>\n    </ion-header-bar>\n      <ion-content>\n          <div class="bar bar-header item-input-inset">\n              <label class="item-input-wrapper">\n                  <input type="number" placeholder="Minutes I plan to read" \n                         ng-model="timer.minutes" \n                         ng-change="timer.setDuration()" min="0"\n                         auto-start="false"\n                         max="60">\n              </label>\n          </div>\n\n          <div class="card">\n              <div class="row padding" ng-click="timer.toggleTimer()">\n                  <ion-timer duration="timer.duration" opts="timer.ionTimerOpts" class="basic-timer"></ion-timer>\n              </div>\n\n              <div class="row">\n                  <div class="col center">\n                      <a class="button button-icon icon ion-trash-b" ng-click="timer.stopTimer()"></a>\n                  </div>\n                  <div class="col center">\n                      <a class="button icon ion-play button-assertive" ng-click="timer.toggleTimer()" ng-show="timer.ionTimerOpts.controls.status() == \'PAUSED\' || timer.ionTimerOpts.controls.status() == \'STOPPED\'"></a>\n                      <a class="button icon ion-pause button-assertive" ng-click="timer.toggleTimer()" ng-show="timer.ionTimerOpts.controls.status() == \'STARTED\'"></a>\n                  </div>\n\n              </div>\n          </div>\n          </ion-content>\n          <ion-footer-bar class="bar-balanced"  align-title="center">\n              <div class="title" ng-click="timer.setTimerInfo();timer.closeTimerModal()">Ok</div>\n          </ion-footer-bar>\n</ion-modal-view>\n')}]);
!function(){"use strict";angular.module("app.basictimer",[]).directive("basictimer",["$compile",function(t){return{restrict:"EA",replace:!1,scope:{interval:"=interval",startTimeAttr:"=startTime",endTimeAttr:"=endTime",countdownattr:"=countdown",autoStart:"&autoStart",maxTimeUnit:"=",seconds:"=?",minutes:"=?",hours:"=?"},controller:["$scope","$element","$attrs","$timeout",function(n,i,e,o){function s(){n.timeoutId&&clearTimeout(n.timeoutId)}function r(){void 0!==e.startTime&&(n.millis=moment().diff(moment(n.startTimeAttr))),n.maxTimeUnit&&"day"!==n.maxTimeUnit?"second"===n.maxTimeUnit?(n.seconds=Math.floor(n.millis/1e3),n.minutes=0,n.hours=0,n.days=0,n.months=0,n.years=0):"minute"===n.maxTimeUnit?(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4),n.hours=0,n.days=0,n.months=0,n.years=0):"hour"===n.maxTimeUnit&&(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4%60),n.hours=Math.floor(n.millis/36e5),n.days=0,n.months=0,n.years=0):(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4%60),n.hours=Math.floor(n.millis/36e5%24),n.days=Math.floor(n.millis/36e5/24),n.months=0,n.years=0),n.sseconds=n.seconds<10?"0"+n.seconds:n.seconds,n.mminutes=n.minutes<10?"0"+n.minutes:n.minutes,n.hhours=n.hours<10?"0"+n.hours:n.hours,n.ddays=n.days<10?"0"+n.days:n.days,n.mmonths=n.months<10?"0"+n.months:n.months,n.yyears=n.years<10?"0"+n.years:n.years}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),n.autoStart=e.autoStart||e.autostart,n.fallback=n.fallback||"en",0===i.html().trim().length?i.append(t("<span>"+$interpolate.startSymbol()+"millis"+$interpolate.endSymbol()+"</span>")(n)):i.append(t(i.contents())(n)),n.startTime=null,n.endTime=null,n.timeoutId=null,n.countdown=angular.isNumber(n.countdownattr)&&parseInt(n.countdownattr,10)>=0?parseInt(n.countdownattr,10):void 0,n.isRunning=!1,n.$on("timer-start",function(){n.start()}),n.$on("timer-resume",function(){n.resume()}),n.$on("timer-stop",function(){n.stop()}),n.$on("timer-clear",function(){n.clear()}),n.$on("timer-reset",function(){n.reset()}),n.$on("timer-set-countdown",function(t,i){n.countdown=i}),n.$watch("startTimeAttr",function(t,i){t!==i&&n.isRunning&&n.start()}),n.$watch("endTimeAttr",function(t,i){t!==i&&n.isRunning&&n.start()}),n.start=i[0].start=function(){n.startTime=n.startTimeAttr?moment(n.startTimeAttr):moment(),n.endTime=n.endTimeAttr?moment(n.endTimeAttr):null,angular.isNumber(n.countdown)||(n.countdown=angular.isNumber(n.countdownattr)&&parseInt(n.countdownattr,10)>0?parseInt(n.countdownattr,10):void 0),s(),m(),n.isRunning=!0},n.resume=i[0].resume=function(){s(),n.countdownattr&&(n.countdown+=1),n.startTime=moment().diff(moment(n.stoppedTime).diff(moment(n.startTime))),m(),n.isRunning=!0},n.stop=n.pause=i[0].stop=i[0].pause=function(){var t=n.timeoutId;n.clear(),n.$emit("timer-stopped",{timeoutId:t,millis:n.millis,seconds:n.seconds,minutes:n.minutes,hours:n.hours,days:n.days})},n.clear=i[0].clear=function(){n.stoppedTime=moment(),s(),n.timeoutId=null,n.isRunning=!1},n.reset=i[0].reset=function(){n.startTime=n.startTimeAttr?moment(n.startTimeAttr):moment(),n.endTime=n.endTimeAttr?moment(n.endTimeAttr):null,n.countdown=angular.isNumber(n.countdownattr)&&parseInt(n.countdownattr,10)>0?parseInt(n.countdownattr,10):void 0,s(),m(),n.isRunning=!1,n.clear()},i.bind("$destroy",function(){s(),n.isRunning=!1}),n.countdownattr?(n.millis=1e3*n.countdownattr,n.addCDSeconds=i[0].addCDSeconds=function(t){n.countdown+=t,n.$digest(),n.isRunning||n.start()},n.$on("timer-add-cd-seconds",function(t,i){o(function(){n.addCDSeconds(i)})}),n.$on("timer-set-countdown-seconds",function(t,i){n.isRunning||n.clear(),n.countdown=i,n.millis=1e3*i,r()})):n.millis=0,r();var m=function a(){var t=null;n.millis=moment().diff(n.startTime);var i=n.millis%1e3;return n.endTimeAttr&&(t=n.endTimeAttr,n.millis=moment(n.endTime).diff(moment()),i=n.interval-n.millis%1e3),n.countdownattr&&(t=n.countdownattr,n.millis=1e3*n.countdown),n.millis<0?(n.stop(),n.millis=0,r(),void(n.finishCallback&&n.$eval(n.finishCallback))):(r(),n.timeoutId=setTimeout(function(){a(),n.$digest()},n.interval-i),n.$emit("timer-tick",{timeoutId:n.timeoutId,millis:n.millis}),void(n.countdown>0?n.countdown--:n.countdown<=0&&(n.stop(),n.finishCallback&&n.$eval(n.finishCallback))))};(void 0===n.autoStart||n.autoStart===!0)&&n.start()}]}}])}();
!function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{bookInfo:"="},templateUrl:"views/directives/bookitem.html"}}angular.module("app.bookitem",[]).directive("bookitem",e)}();
!function(){"use strict";angular.module("app.directives",["app.bookitem","app.basictimer","ionic-datepicker","app.print"])}();
!function(){"use strict";function n(n,i){function t(n,i,t){i.on("click",function(){var n=document.getElementById(t.printElementId);n&&e(n)}),window.onafterprint=function(){r.innerHTML=""}}function e(t){var e=t.cloneNode(!0);r.appendChild(e),o?n.isAvailable()?n.print(r,{name:"readinglog.pdf",landscape:!0},function(){r.innerHTML=""}):i.alert({title:"Sorry",template:"your mobile device has no printing capacity"}):window.print()}var o=!(window.location.origin.indexOf("http")>=0||window.location.origin.indexOf("https")>=0),r=document.getElementById("printSection");return r||(r=document.createElement("div"),r.id="printSection",document.body.appendChild(r)),{link:t,restrict:"A"}}angular.module("app.print",[]).directive("ngPrint",n),n.$inject=["$cordovaPrinter","$ionicPopup"]}();
!function(){"use strict";function e(e,n,t){var o=this,r=t.constants.GoogleApiSearchType,s=function(e,n){var t="";switch(e){case r.isbn:t=i+"?q=isbn:"+n;break;case r.title:t=i+"?q="+n}return t},a=function(i){var t=n.defer();return e.get(i).then(function(e){t.resolve(e.data)}),t.promise};o.searchTitleOnly=function(e){var i=s(r.title,e);return i+="&maxResults=10&fields=items(volumeInfo/title,volumeInfo/imageLinks/smallThumbnail)&orderBy=relevance",a(i)},o.search=function(i,t){var o=n.defer(),r=s(i,t);return r+="&maxResults=1&fields=items%2FvolumeInfo&orderBy=relevance",e.get(r).then(function(e){o.resolve(e.data)}),o.promise},o.getBookInfo=function(e){var i=e.volumeInfo,n={title:i.title,link:i.infoLink,smThumbnail:i.imageLinks&&i.imageLinks.smallThumbnail?i.imageLinks.smallThumbnail:"img/image-missing-md.png",description:i.description,previewLink:i.previewLink,authors:i.authors};return n}}var i="https://www.googleapis.com/books/v1/volumes";angular.module("app.GoogleApiService",[]).service("GoogleApiService",e),e.$inject=["$http","$q","appGlobalConfigService"]}();
!function(){"use strict";function e(){function e(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear().toString().substring(2,4)}function t(t,a,n){switch(t){case 0:return"This "+n;case 1:return"Last "+n;default:return("week"==n?"Week":"Month")+" Of "+e(a)}}function a(e){var t=new Date,a=t.getDay(),r=n(e);return r.length>1?0===a?r[0]:r[1]:null}function n(e){var a,n=new Date,r=n.getDay(),D=new Date((new Date).setDate(n.getDate()-r)),i=[];for(a=0;s>a;a++){var u=D.getTime(),g=new Date(new Date(u).setDate(D.getDate()-7*a)),o=new Date(new Date(g.getTime()).setDate(g.getDate()+6)),w=e>=g;if(i.push({name:t(a,g,"week"),startDate:w?e:g,endDate:o>n?n:o}),w)break}return i}function r(e){var a,n=new Date,r=n.getMonth(),D=n.getFullYear(),s=[];for(a=0;i>a;a++){var u=new Date(D,r,1,0,0,0),g=new Date(u.setMonth(r-a)),o=new Date(new Date(g.getTime()).setMonth(g.getMonth()+1)-1),w=e>=g;if(s.push({name:t(a,g,"month"),startDate:w?e:g,endDate:o>n?n:o}),w)break}return s}var D=this,s=12,i=6;D.getLastSixMonths=r,D.getLastTwelveWeeks=n,D.getLastWeekDates=a}angular.module("app.dateTimeService",[]).service("appDateTimeService",e)}();
!function(){"use strict";function e(e,r){function t(t){var o=e.defer(),a=n(t);return r({url:i,method:"POST",data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){o.resolve(e)}),o.promise}var i="http://rlmail.azurewebsites.net/api/email";return{sendEmail:t}}function n(e){var n=[];for(var r in e)n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.join("&")}angular.module("app.emailService",[]).service("appEmailService",e),e.$inject=["$q","$http"]}();
!function(){"use strict";function e(e){var r=this,t=new Date,a=t.getDate()+"_"+t.getMonth()+"_"+t.getFullYear(),o="https://fiery-torch-1756.firebaseio.com/feedbacks"+a,i=new Firebase(o);r.addFeedback=function(r){var t=e.defer();return r.platform=log_currentPlatform,r.platformVersion=log_currentPlatformVersion,i.push(r,function(){t.resolve()}),t.promise}}angular.module("app.feedbackService",["firebase"]).service("appFeedbackService",e),e.$inject=["$q"]}();
!function(){"use strict";function e(e,n,t,o){function i(r){var n=e.defer();return l.authWithOAuthPopup(r,function(e,r){e&&n.reject(e),r&&n.resolve(r)}),n.promise}function u(r){var n=e.defer();return l.authWithPassword(r,function(e,r){e&&n.reject(e),r&&n.resolve(r)}),n.promise}function c(r){var n=e.defer();return l.createUser(r,function(e){e?n.reject(e):n.resolve()}),n.promise}function s(e){return c(e).then(function(){return u(e)})}function a(r){var n=e.defer();return l.resetPassword(r,function(e){null===e?n.resolve("Password reset email sent successfully"):n.reject(e)}),n.promise}var f=this,l=new Firebase(r);f.logIn=function(e){return u(e)},f.signUpAndLogin=function(e){return s(e)},f.signOut=function(){l.unauth(),o(function(){t.clearCache(),t.clearHistory(),t.nextViewOptions({disableBack:!0,historyRoot:!0})},30)},f.resetPassword=function(e){return a(e)},f.facebookLogin=function(){return i("facebook")},f.googleLogin=function(){return i("google")}}var r="https://fiery-torch-1756.firebaseio.com";angular.module("app.fireBaseAuthService",["firebase"]).service("appFireBaseAuthService",e),e.$inject=["$q","$rootScope","$ionicHistory","$timeout"]}();
!function(){"use strict";function e(e,r){function t(o){var r=e.defer();return r.reject(o),r.promise}var n=this,i=new Firebase(o),s={};n.getBookLogsByUser=function(){var e=i.getAuth(),t=new Firebase(o+"booklogs"),n=t.child(e.uid);return r(n)},n.addBookLog=function(o){var r=e.defer(),t=n.getBookLogsByUser();return t.$add(o).then(function(e){r.resolve(t)}),r.promise},n.editBookLog=function(o){var r=e.defer();return n.getBookLogsByUser().$loaded().then(function(e){var n=e.$getRecord(o.$id);n&&e.$save(angular.extend(n,o)).then(function(o){r.resolve(e)},t)},t),r.promise},n.removeBookLog=function(o){var r=e.defer();return n.getBookLogsByUser().$loaded().then(function(e){var t=e.$getRecord(o.$id);e.$remove(t).then(function(e){r.resolve(e)})},t),r.promise},n.setCurrentBookEdit=function(e){s=e},n.getCurrentBookEdit=function(){return s}}var o="https://fiery-torch-1756.firebaseio.com/";angular.module("app.fireBaseBookService",["firebase"]).service("appFireBaseBookService",e),e.$inject=["$q","$firebaseArray"]}();
!function(){"use strict";angular.module("app.services",["app.fireBaseBookService","app.GoogleApiService","app.fireBaseAuthService","app.userService","app.dateTimeService","app.emailService","app.feedbackService"])}();
!function(){"use strict";function e(e,t,n){function a(e){var r=l.getAuth();if(r){var t=l.child("users").child(r.uid);t.update({avartar:e},function(){n.alert({title:"Great",template:"Thanks! Image has been uploaded"})})}}function u(r){var t=e.defer(),a=l.getAuth();if(a){var u=l.child("users").child(a.uid);u.update(r,function(){n.alert({title:"Great",template:"Thanks! You are fantastic"}),t.resolve()})}else t.reject("woo. user does not exist");return t.promise}function i(r){var t,n=e.defer(),a=l.getAuth();return a||n.reject({error:"user not registered"}),t=l.child("users").child(a.uid),t.once("value",function(e){var a=e.val();a?n.resolve(a):t.set(r,function(){n.resolve(r)})}),n.promise}function s(){var r,t=e.defer(),n=l.getAuth();return n?(r=l.child("users").child(n.uid),r.once("value",function(e){var r=e.val();r||t.resolve(null),t.resolve(r||null)}),t.promise):(t.reject("user not authenticated"),t.promise)}function o(r){var t=e.defer(),n=s();return n.then(function(e){return null!==e?(t.resolve(e),t):i(r)}),t.promise}var c=this,l=new Firebase(r);c.saveGoogleDataAndSetUser=function(e){return o({displayName:e.displayName})},c.saveFaceBookDataAndSetUser=function(e){return o({displayName:e.displayName})},c.saveCustomUserDataAndSetUser=function(e){return o({email:e})},c.saveUserAvartar=function(e){return a(e)},c.getUserInfo=s,c.saveUserInfo=function(e){return u(e)},c.storeUserInfoToLocal=function(e){t.setObject("currentuser",e)},c.isUserAuthenticated=function(){var e=l.getAuth();return null!==e}}var r="https://fiery-torch-1756.firebaseio.com";angular.module("app.userService",["firebase"]).service("appUserService",e),e.$inject=["$q","$localstorage","$ionicPopup"]}();
!function(){"use strict";function e(e,t,a,n){var o=this;o.onSubmit=function(){var e=angular.element("<div/>").html(o.comments).text();t.addFeedback({comments:e}).then(function(){a.alert({title:"Thank you so much",template:"We appreciate your feedback. "}).then(function(e){n.go("app.booklogform")})})}}angular.module("app.feedback",[]).controller("appFeedback",e),e.$inject=["$scope","appFeedbackService","$ionicPopup","$state"]}();
!function(){"use strict";function e(e,n){var r=this,i=n.genres;r.genres=i}angular.module("app.viewGenres",[]).controller("appViewGenres",e),e.$inject=["$scope","appGlobalConfigService"]}();
!function(){"use strict";angular.module("app.modules",["app.stats","app.sidemenu","app.settings","app.readnow","app.viewall","app.modals","app.directives","app.viewGenres","app.feedback","app.weeklylog"])}();
!function(){"use strict";function o(o,t,n,r,s,l,d,m,c,h){var g=this,b=d.constants.ModalTypes;if(g.isMobileApp=!(window.location.origin.indexOf("http")>=0||window.location.origin.indexOf("https")>=0),g.isEditing=c.edit,g.readingHow=1,a(o,r,d),g.genre="NF",g.showModal=function(e){i(o,e,b)},g.bookCategories=d.genres,g.readWays=d.readWays,g.modalTypes=b,g.ratingsObject={iconOn:"ion-ios-star",iconOff:"ion-ios-star-outline",iconOnColor:"rgb(200, 200, 100)",iconOffColor:"rgb(200, 100, 100)",rating:0,minRating:1,callback:function(o){g.rating=o}},"true"===g.isEditing){var u=l.getCurrentBookEdit();g.readingTimeStats={timeRead:u.timeRead,date:u.dateRead},g.book={title:u.title,smThumbnail:u.smThumbnail,description:u.description},g.genre=u.genre||"NF",g.rating=u.rating||1,g.readingHow=u.readingSel||1,g.ratingsObject.rating=g.rating}else g.readingTimeStats={timeRead:0,date:(new Date).toDateString()};o.setBookInfo=function(o,e,t){o=o||{title:e,authorName:t},g.book=o},o.setReadingTimeInfo=function(o,e,t){var a=e||0;g.readingTimeStats={timeRead:60*a+o,date:t?t.toDateString():(new Date).toDateString()}},g.onSubmit=function(){var o;if(null!==g.book&&g.book&&g.book.title&&g.book.title.length>0&&null!==g.readingTimeStats&&g.readingTimeStats.timeRead>0&&(o={title:g.book.title,author:g.book.authors||"",smThumbnail:g.book.smThumbnail||"img/image-missing-md.png",description:g.book.description||"",dateRead:g.readingTimeStats.date||new Date,timeRead:g.readingTimeStats.timeRead||0,genre:g.genre||"NF",rating:g.rating||1,readingSel:g.readingHow||1}),!o){var t=s.alert({title:"Please set the book title and minutes you have read",template:"You probably forgot?"});return t.then(function(o){}),!1}var a;a=g.isEditing?l.editBookLog(angular.extend(u,o)):l.addBookLog(o),a.then(function(o){return h.clearCache(),e(s,m)})}}function e(o,e){var t=o.alert({title:"Woo-hoo",template:"Thanks! We have logged your book"});t.then(function(o){e.go("app.viewall")})}function t(o,e){return{scope:o,backdropClickToClose:!0,animation:"slide-in-up",id:e}}function a(o,e,a){var i=a.constants.ModalTypes;e.fromTemplateUrl("views/modal/stopwatch.html",t(o,i.stopwatch)).then(function(e){o.stopWatchModal=e}),e.fromTemplateUrl("views/modal/timer.html",t(o,i.timer)).then(function(e){o.timerModal=e}),e.fromTemplateUrl("views/modal/timeform.html",t(o,i.timeform)).then(function(e){o.timeFormModal=e}),e.fromTemplateUrl("views/modal/bookscan.html",t(o,i.scan)).then(function(e){o.bookScanModal=e}),e.fromTemplateUrl("views/modal/booksearch.html",t(o,i.search)).then(function(e){o.bookSearchModal=e}),e.fromTemplateUrl("views/modal/bookentry.html",t(o,i.bookform)).then(function(e){o.bookEntryModal=e}),o.$on("$destroy",function(){o.stopWatchModal.remove(),o.timerModal.remove(),o.timeFormModal.remove(),o.bookScanModal.remove(),o.bookSearchModal.remove(),o.bookEntryModal.remove()}),o.$on("modal.shown",function(e,t){switch(t.id){case i.stopwatch:o.$broadcast("stopwatch-shown");break;case i.timer:o.$broadcast("timer-shown")}})}function i(o,e,t){switch(e){case t.timer:o.timerModal.show();break;case t.stopwatch:o.stopWatchModal.show();break;case t.timeform:o.timeFormModal.show();break;case t.scan:o.bookScanModal.show();break;case t.search:o.bookSearchModal.show();break;case t.bookform:o.bookEntryModal.show()}}angular.module("app.readnow",[]).controller("appReadNow",o),o.$inject=["$scope","$rootScope","$ionicPlatform","$ionicModal","$ionicPopup","appFireBaseBookService","appGlobalConfigService","$state","$stateParams","$ionicHistory"]}();
!function(){"use strict";function e(e,t,a,s){var n=this;n.grades=a.grades,n.schools=a.schools,n.school=n.schools[0],n.teachers=r(n.schools,n.school),n.setSchoolTeachers=function(){n.teachers=r(n.schools,n.school)},n.setCurrentUserInfo=function(e){null!==e&&(n.user=e,n.school=o(n.schools,e.school),n.teachers=r(n.schools,n.school),n.teacher=o(n.teachers,e.teacher))},t.getUserInfo().then(function(e){n.setCurrentUserInfo(e)}),n.saveUserInfo=function(){var r={username:n.user.username,grade:n.user.grade||"other",parentemail:n.user.parentemail,parentphone:n.user.parentphone||""};n.school&&n.school.value&&(r.school=n.school.value),n.teacher&&n.teacher.value&&(r.teacher=n.teacher.value),t.saveUserInfo(r).then(function(){e.$broadcast("user-changed",n.user.username),s.go("app.booklogform")})},n.selectImage=function(){var r={maximumImagesCount:1,width:200,height:200,quality:80};window.imagePicker.getPictures(function(r){var o;return r&&r.length>0?(o=r[0],void $jrCrop.crop({url:o,width:100,height:100}).then(function(r){var o=r.toDataURL();t.saveUserAvartar(o),n.user.avartar=o,e.$broadcast("user-avartar-changed",n.user.avartar)},function(){})):!1},function(e){console.log("Error: "+e)},r)}}function r(e,r){if(r&&r.value){var t=o(e,r.value);return t&&t.teachers?t.teachers:[]}return[]}function o(e,r){var o=e.filter(function(e){return e.value==r});return o&&o.length?o[0]:null}angular.module("app.settings",["jrCrop"]).controller("appSettings",e),e.$inject=["$rootScope","appUserService","appGlobalConfigService","$state"]}();
!function(){"use strict";function e(e,n){var r=this;n.getUserInfo().then(function(e){r.user=e},function(){r.user=null}),e.$on("user-changed",function(e,n){r.user&&(r.user.username=n)}),e.$on("user-avartar-changed",function(e,n){r.user&&(r.user.avartar=n)})}angular.module("app.sidemenu",[]).controller("appSideMenu",e),e.$inject=["$scope","appUserService"]}();
!function(){"use strict";function e(e,t,n,a,r){function o(e){var t,n=m.length,a=[];for(t=0;n>t;t++){var r=u(m[t],e);null!==r&&a.push(r)}return a}function u(e,t){var n=t.filter(function(t){return t.genre==e.value});if(n.length>0){var a=n.map(function(e){return e.timeRead}),r=a.reduce(function(e,t){return e+t});return{name:e.value,minutes:r}}return null}function s(e){var t,n,a,r,o=e.length,u=e.map(function(e){return new Date(e.dateRead)}),s=[];if(u=g(u),"weekly"==h.mode?r=h.weekselected:"monthly"==h.mode&&(r=h.monthselected),r){n=r.startDate,a=r.endDate,u=[n];for(var i=new Date(n.getTime());a>i;)u.push(new Date(i.setDate(i.getDate()+1)))}for(o=u.length,t=0;o>t;t++){var c=u[t],d=l(c,e);s.push(d)}return{dates:u,time:s}}function l(e,t){var n=0,a=t.filter(function(t){return new Date(t.dateRead).setHours(0,0,0,0)==e.setHours(0,0,0,0)});if(a&&a.length>0){var r=a.map(function(e){return e.timeRead});n=r.reduce(function(e,t){return e+t})}return n}function i(e){h.allBooksRead=e;var t=new Date(e[0].dateRead);c(t),d(e)}function c(e){h.weeks=a.getLastTwelveWeeks(e),h.months=a.getLastSixMonths(e),h.weeks.length>0&&(h.weekselected=h.weeks[0]),h.months.length>0&&(h.monthselected=h.months[0])}function d(e){0===e.length&&console.log("no books found. cannot chart");var t=e;h.books=t;var n=o(t),a=n.map(function(e){return e.name}),u=n.map(function(e){return e.minutes});h.chartGenreData={labels:a,data:[u]};var l=s(t),i=l.dates.map(function(e){return r("date")(e,"MM/dd")}),c=Math.floor(i.length/10),d=[];if(c>=1)for(var f=0;f<i.length;f++)f%c===0&&d.push(i[f]);else d=i;h.chartReadingData={labels:d,data:[l.time]}}function f(e){console.log(e)}var h=this,m=n.genres;h.mode="weekly",e.$on("newbooklogged",function(e,t){h.allBooksRead=t,d(t)}),t.getBookLogsByUser().$loaded().then(i,f),h.setTimeMode=function(e){h.mode=e,h.rechart()},h.rechart=function(){var e,t,n,a,r,o=angular.copy(h.allBooksRead);e="weekly"==h.mode?h.weekselected:h.monthselected,e&&(t=e.startDate,n=e.endDate,a=o.filter(function(e){return r=new Date(e.dateRead).setHours(0,0,0,0),r>=t.setHours(0,0,0,0)&&r<=n.setHours(0,0,0,0)}),d(a))};var g=function(e){return e.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])}}angular.module("app.stats",[]).controller("appStats",e),e.$inject=["$scope","appFireBaseBookService","appGlobalConfigService","appDateTimeService","$filter"]}();
!function(){"use strict";function e(e,n,o,t,r,a,i,l){function c(e){var n=e;if(h&&h.length){s.genreId=h;var o=d.filter(function(e){return f(e,s.genreId)});s.genreName=o&&o.length?o[0].name:"",n=e.filter(function(e){return e.genre==h})}angular.forEach(n,function(e){u(e)}),s.booklogs=n}function g(e){throw e.message}function u(e){var n=m.filter(function(n){return f(n,e.readingSel)}),o=d.filter(function(n){return f(n,e.genre)});e.timestamp=new Date(e.dateRead),e.readMannerName=n&&n.length?n[0].name:"Read By Myself",e.genreName=o&&o.length?o[0].name:"Non Fiction"}function f(e,n){return e.value===n}var s=this,d=r.genres,m=r.readWays,h=o.genreId;e.$on("newbooklogged",function(e,n){s.allBooksRead=n;try{c(n)}catch(o){s.error=o.message}}),t.getBookLogsByUser().$loaded().then(c,g),s.showFilterBar=function(){s.filterBarInstance=a.show({items:s.booklogs,update:function(e,n){s.booklogs=e}})},s.editLog=function(e){l.clearCache(),t.setCurrentBookEdit(e),n.go("app.booklogform",{edit:!0},{reload:!0})},s.removeLog=function(e){t.removeBookLog(e).then(function(e){},g)}}angular.module("app.viewall",["jett.ionic.filter.bar"]).controller("appViewAll",e),e.$inject=["$scope","$state","$stateParams","appFireBaseBookService","appGlobalConfigService","$ionicFilterBar","$timeout","$ionicHistory"]}();
!function(){"use strict";function e(e,t,n,a,r,i,o,s){function l(e){var t=e;if(t&&t.length){var n=new Date(e[0].dateRead);u(n,t)}}function u(e,n){var a,r,i,s=o.getLastWeekDates(e),l=[],u=[],g=["Mon","Tues","Wed","Thurs","Fri","Sat","Sun"],m=0,f=new Date,y=f.getDay();if(s){for(i=0===y?s.startDate.addDays(-6):s.startDate.addDays(1),h.lastWeekDate=t("date")(i,"MM/dd/yy"),h.booklogs=n,a=0;7>a&&(r=i.addDays(a),!(r>=new Date));a++)u=d(n,r),u.length&&(m+=p(u)),u=u.map(c),0===u.length&&u.push({title:"",nonStarsArr:5,starsArr:0}),l.push({name:g[a],books:u});h.booksReadWeekly=l,h.totalminutes=m}}function d(e,t){return e.filter(function(e){return new Date(e.dateRead).setHours(0,0,0,0)==t.setHours(0,0,0,0)})}function p(e){return 1==e.length?e[0].timeRead:e.reduce(function(e,t){return e.timeRead+t?t.timeRead:0})}function c(e){var t=e.readingSel?g(h.readWays,e.readingSel):h.readWays;return e.howIRead=t?t.name:h.readWays[0].name,e.starsArr=new Array(e.rating),e.nonStarsArr=new Array(5-e.rating),e}function g(e,t){var n=e.filter(function(e){return m(e,t)});return n.length>0?n[1]:e[0]}function m(e,t){return e.value===t}function f(e){throw e.message}function y(e){e.alert({title:"Email sent",template:"It may take a minute or 2 reaching your inbox. Try not to let it run into your spam box :)"})}var h=this;h.isMobileApp=!(window.location.origin.indexOf("http")>=0||window.location.origin.indexOf("https")>=0),h.genres=r.genres,h.readWays=r.readWays,i.getUserInfo().then(function(e){h.username=e.username,h.parentEmail=e.parentemail}),a.getBookLogsByUser().$loaded().then(l,f),h.sendEmail=function(){if(h.parentEmail&&h.parentEmail.length){var e=document.getElementById("print-log").innerHTML;e=e.replace(/img/g,"http://readinglogapp.net/img"),s.sendEmail({MailTo:h.parentEmail,Subject:"Weekly Reading Report for "+h.username,Body:e}).then(function(){y(n)})}}}angular.module("app.weeklylog",[]).controller("appWeeklyLog",e),e.$inject=["$scope","$filter","$ionicPopup","appFireBaseBookService","appGlobalConfigService","appUserService","appDateTimeService","appEmailService"]}();
!function(){"use strict";angular.module("app.auth",["app.welcome","app.login","app.logout","app.signup","app.forgetpassword"])}();
!function(){"use strict";function t(t,e,s){function r(t){n.msg=t}function o(t){n.msg=t.toString()}var n=this;n.requestNewPassword=function(){var t=s.resetPassword(n.user);t.then(r,o)}}angular.module("app.forgetpassword",[]).controller("appForgetPassword",t),t.$inject=["$scope","$state","appFireBaseAuthService"]}();
!function(){"use strict";function o(o,e,t,n,r){function i(o){if(r.isUserAuthenticated())return t.go("app.booklogform"),!1;var e=r.saveCustomUserDataAndSetUser(s.user.email);e.then(function(o){t.go("app.booklogform")})}function a(o){s.error=o.toString()}var s=this;s.doLogIn=function(){var o=n.logIn(s.user);o.then(i,a)}}angular.module("app.login",[]).controller("appLogin",o),o.$inject=["$scope","$rootScope","$state","appFireBaseAuthService","appUserService"]}();
!function(){"use strict";function o(o,t){t.signOut()}angular.module("app.logout",[]).controller("appLogout",o),o.$inject=["$scope","appFireBaseAuthService"]}();
!function(){"use strict";function e(e,n,o,r){function t(e){r.saveCustomUserDataAndSetUser(a.user.email),n.go("app.booklogform")}function i(e){a.error=e.toString()}var a=this;a.doSignUp=function(){var e=o.signUpAndLogin(a.user);e.then(t,i)}}angular.module("app.signup",[]).controller("appSignup",e),e.$inject=["$scope","$state","appFireBaseAuthService","appUserService"]}();
!function(){"use strict";function o(o,e,n,g){function r(o){var n,r=o.facebook?o.facebook:o.google?o.google:null;return r?(o.facebook?n=g.saveFaceBookDataAndSetUser(o.facebook):o.google&&(n=g.saveGoogleDataAndSetUser(o.google)),i.loggingin=!1,e.go("app.booklogform"),!1):void(i.error="Sorry, something is wrong. We could not log you in successfully")}function t(o){i.error=o.toString()}var i=this;i.facebookSignIn=function(){if(g.isUserAuthenticated())return e.go("app.booklogform"),!1;i.loggingin=!0;var o=n.facebookLogin();o.then(r,t)},i.googleSignIn=function(){if(g.isUserAuthenticated())return e.go("app.booklogform"),!1;i.logging=!0;var o=n.googleLogin();o.then(r,t)}}angular.module("app.welcome",[]).controller("appWelcome",o),o.$inject=["$scope","$state","appFireBaseAuthService","appUserService"]}();
!function(){"use strict";function o(o){var n=this;n.closeBookEntryModal=function(){o.bookEntryModal.hide()}}angular.module("app.bookEntry",[]).controller("appBookEntry",o),o.$inject=["$scope"]}();
!function(){"use strict";function o(o,e,n,s,c){var t=this,a=s.constants.GoogleApiSearchType,i=function(o){var e=o.text;t.googleApiService;t.scanResults={text:"BarCode Found",success:!0},c.search(a.isbn,e).then(function(o){return o&&o.items&&o.items.length>0?(t.scanResults={text:"Yah, we found the book",success:!0},t.bookInfo=c.getBookInfo(o.items[0]),void(t.bookFound=!0)):void(t.scanResults={text:"Sorry, we could not find this book in our book repository. We suggest you to search a book instead",success:!1})})},r=function(o){t.scanResults={text:"Scanner Error: "+o+", Please make sure you enable your camera input. Or you can just search a book instead",success:!1}};t.closebookScanModal=function(){o.bookScanModal.hide()},t.scanMyBookNow=function(){n.ready(function(){e.scan().then(i,r)})}}angular.module("app.bookscan",["app.services"]).controller("appBookScan",o),o.$inject=["$scope","$cordovaBarcodeScanner","$ionicPlatform","appGlobalConfigService","GoogleApiService"]}();
!function(){"use strict";function e(e,o,n){var i=this,t=o.constants.GoogleApiSearchType;i.query="",i.closebookSearchModal=function(){e.bookSearchModal.hide()};var l=function(e){n.search(t.title,e).then(function(e){e.items.length>0&&(i.bookInfo=n.getBookInfo(e.items[0]))})},a=ionic.debounce(function(e){n.searchTitleOnly(e).then(function(e){var o=e.items;i.searchResultTitles=o.map(function(e){return{thumbnail:e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.smallThumbnail?e.volumeInfo.imageLinks.smallThumbnail:"img/missing.png",title:e.volumeInfo.title}})})},500);i.getBookTitles=function(){a(i.query)},i.setBookTitleAndSearch=function(e){i.query=e,i.searchResultTitles=[],l(e)}}angular.module("app.bookSearch",["app.services"]).controller("appBookSearch",e),e.$inject=["$scope","appGlobalConfigService","GoogleApiService"]}();
!function(){"use strict";angular.module("app.modals",["app.timeForm","app.timer","app.stopWatch","app.bookscan","app.bookSearch","app.bookEntry"])}();
!function(){"use strict";function t(t){var e=this;e.startTimer=function(){t.timerPaused?t.$broadcast("timer-resume"):t.$broadcast("timer-start"),t.timerRunning=!0},e.stopTimer=function(){t.$broadcast("timer-stop"),t.timerPaused=!0,t.timerRunning=!1},e.resetTimer=function(){t.$broadcast("timer-reset"),t.timerRunning=!1},t.$on("timer-stopped",function(t,o){e.timeInfo=o}),e.closeStopWatchModal=function(){e.stopTimer(),t.stopWatchModal.hide()},e.setTimeInfo=function(){e.stopTimer();var o=Math.ceil(e.timeInfo.seconds/60)+e.timeInfo.minutes;t.setReadingTimeInfo(o,e.timeInfo.hours),e.closeStopWatchModal()}}angular.module("app.stopWatch",[]).controller("appStopWatch",t),t.$inject=["$scope"]}();
!function(){"use strict";function e(e){var t=this;t.closeTimeFormModal=function(){e.timeFormModal.hide()},t.datePickerCallback=function(e){t.dateSelected=e},t.setTimeInfo=function(){var o=t.dateSelected?new Date(t.dateSelected):new Date;e.setReadingTimeInfo(t.minutes,0,o),t.closeTimeFormModal()}}angular.module("app.timeForm",[]).controller("appTimeForm",e),e.$inject=["$scope"]}();
!function(){"use strict";function o(o){var t=this,e=20;t.closeTimerModal=function(){o.timerModal.hide()},t.minutes=20,t.duration=60*(t.minutes||e),t.setDuration=function(){t.duration=60*(t.minutes||e)};var i=function(){t.ionTimerOpts.progressCircle.strokeColor="#3BCC3B",t.ionTimerOpts.text={color:"#3BCC3B"}};t.ionTimerOpts={autoStart:!1,text:{color:"#45ccce",size:"20px"},progressCircle:{backgroundColor:"#eaeaea",rounded:!0,clockwise:!1},events:{onComplete:i,onStart:function(){},onPause:function(o){t.timeRead=Math.ceil(o/60)},onStop:function(o){}}},t.toggleTimer=function(){var o=t.ionTimerOpts.controls.status();"STARTED"===o?t.ionTimerOpts.controls.pause():t.ionTimerOpts.controls.start()},t.stopTimer=function(){t.duration=60*(t.minutes||e),t.ionTimerOpts.controls.stop(),t.ionTimerOpts.progressCircle.strokeColor="#45ccce",t.ionTimerOpts.text={color:"#45ccce"}},t.setTimerInfo=function(){t.ionTimerOpts.controls.pause(),o.setReadingTimeInfo(t.timeRead),t.closeTimerModal()}}angular.module("app.timer",[]).controller("appTimer",o),o.$inject=["$scope"]}();