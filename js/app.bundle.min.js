function track(o,e){var n=new Date,r=n.getDate()+"_"+n.getMonth()+"_"+n.getFullYear(),a="https://fiery-torch-1756.firebaseio.com/errorlogs/"+r,i=new Firebase(a);e.platform=log_currentPlatform,e.platformVersion=log_currentPlatformVersion,i.push(e)}var debug=!1,log_currentPlatform,log_currentPlatformVersion,isApp;angular.module("app",["ionic","ionic.utils","chart.js","dbaq.ionTimer","ionic-datepicker","ionic-ratings","readinglog.views","app.config","app.GlobalConfig","app.services","app.auth","app.modules"]).config(["$provide",function(o){o.decorator("$exceptionHandler",["$delegate",function(o){return function(e,n){o(e,n);var r={url:window.location.hash};n&&(r.cause=n),e&&(e.message&&(r.message=e.message),e.name&&(r.name=e.name),e.stack&&(r.stack=e.stack)),debug?console.log("exception",r):track("exception",r)}}])}]).run(["$state","$ionicPlatform","appUserService","appFireBaseAuthService",function(o,e,n,r){function a(){n.getUserInfo().then(function(o){null===o&&r.authAnonymously()},function(){r.authAnonymously()})}window.isMobileApp=!(window.location.origin.indexOf("http")>=0||window.location.origin.indexOf("https")>=0),a(),e.ready(function(){e.on("resume",function(o){a()}),log_currentPlatform=ionic.Platform.platform(),log_currentPlatformVersion=ionic.Platform.version(),window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&(StatusBar.overlaysWebView(!1),ionic.Platform.fullScreen()),ionic.Platform.isFullScreen=!0}),e.registerBackButtonAction(function(o){navigator.app.backHistory()},100)}]),window.onerror=function(o,e,n,r,a){var i=debug?!1:!0,t={url:window.location.hash};return o&&(t.message=o),e&&(t.fileName=e),n&&(t.lineNumber=n),r&&(t.columnNumber=r),a&&(a.name&&(t.name=a.name),a.stack&&(t.stack=a.stack)),debug?console.log("exception",t):track("exception",t),i};
!function(){"use strict";angular.module("app.config",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("auth",{url:"/auth",templateUrl:"views/auth/auth.html","abstract":!0}).state("auth.welcome",{url:"/welcome",templateUrl:"views/auth/welcome.html",controller:"appWelcome as welcome"}).state("auth.login",{url:"/login",templateUrl:"views/auth/login.html",controller:"appLogin as login"}).state("auth.signup",{url:"/signup",templateUrl:"views/auth/signup.html",controller:"appSignup as signup"}).state("auth.forgot-password",{url:"/forgot-password",templateUrl:"views/auth/forgot-password.html",controller:"appForgetPassword as forgetPassword"}).state("auth.logout",{url:"/logout",controller:"appLogout as logout",templateUrl:"views/auth/logout.html"}).state("app",{url:"/app","abstract":!0,templateUrl:"views/app/side-menu.html",controller:"appSideMenu as sidemenu",authRequired:!0,resolve:{user:["appUserService",function(e){return e.getUserInfo()}]}}).state("app.booklogform",{url:"/booklogform/:edit",views:{menuContent:{templateUrl:"views/app/readnow.html",controller:"appReadNow as readNow"}},authRequired:!0}).state("app.stats",{url:"/stats",views:{menuContent:{templateUrl:"views/app/stats.html",controller:"appStats as stats"}}}).state("app.viewall",{url:"/viewall/all",views:{menuContent:{templateUrl:"views/app/viewall.html",controller:"appViewAll as viewall"}}}).state("app.viewgenres",{url:"/viewgenres",views:{menuContent:{templateUrl:"views/app/genre.html",controller:"appViewGenres as viewgenres"}}}).state("app.booksbygenre",{url:"/viewall/:genreId",views:{menuContent:{templateUrl:"views/app/viewall.html",controller:"appViewAll as viewall"}}}).state("app.weeklylog",{url:"/weeklylog",views:{menuContent:{templateUrl:"views/app/weeklylog.html",controller:"appWeeklyLog as weeklylog"}}}).state("app.settings",{url:"/settings",views:{menuContent:{templateUrl:"views/app/settings.html",controller:"appSettings as settings"}}}).state("app.feedback",{url:"/feedback",views:{menuContent:{templateUrl:"views/app/feedback.html",controller:"appFeedback as feedback"}}}),t.otherwise("/auth/welcome")}])}();
!function(){"use strict";angular.module("app.config",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("auth",{url:"/auth",templateUrl:"views/auth/auth.html","abstract":!0}).state("auth.signup",{url:"/signup",templateUrl:"views/auth/signup.html",controller:"appSignup as signup"}).state("auth.forgot-password",{url:"/forgot-password",templateUrl:"views/auth/forgot-password.html",controller:"appForgetPassword as forgetPassword"}).state("app",{url:"/app","abstract":!0,templateUrl:"views/app/side-menu.html",controller:"appSideMenu as sidemenu"}).state("app.booklogform",{url:"/booklogform/:edit",views:{menuContent:{templateUrl:"views/app/readnow.html",controller:"appReadNow as readNow"}},authRequired:!0}).state("app.stats",{url:"/stats",views:{menuContent:{templateUrl:"views/app/stats.html",controller:"appStats as stats"}}}).state("app.viewall",{url:"/viewall/all",views:{menuContent:{templateUrl:"views/app/viewall.html",controller:"appViewAll as viewall"}}}).state("app.viewgenres",{url:"/viewgenres",views:{menuContent:{templateUrl:"views/app/genre.html",controller:"appViewGenres as viewgenres"}}}).state("app.booksbygenre",{url:"/viewall/:genreId",views:{menuContent:{templateUrl:"views/app/viewall.html",controller:"appViewAll as viewall"}}}).state("app.weeklylog",{url:"/weeklylog",views:{menuContent:{templateUrl:"views/app/weeklylog.html",controller:"appWeeklyLog as weeklylog"}}}).state("app.accounts",{url:"/accounts",views:{menuContent:{templateUrl:"views/app/account.html",controller:"appAccount as account"}}}).state("app.treasure",{url:"/treasures",views:{menuContent:{templateUrl:"views/app/treasurebox.html",controller:"appTreasure as treasure"}}}).state("app.settings",{url:"/settings",views:{menuContent:{templateUrl:"views/app/settings.html",controller:"appSettings as settings"}}}),t.otherwise("app/booklogform/")}])}();
Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e};
angular.module("app.GlobalConfig",[]).service("appGlobalConfigService",function(){return{genres:[{name:"Non Fiction",value:"NF",img:"genre/nonfiction.png"},{name:"Realistic Fiction",value:"RF",img:"genre/realistic.png"},{name:"Historical Fiction",value:"HF",img:"genre/historical.png"},{name:"Fiction",value:"FT",img:"genre/fiction.png"},{name:"Science Fiction/Fantasy",value:"SF",img:"genre/fantasy.png"},{name:"Poetry",value:"P",img:"genre/poetry.png"},{name:"Mystery",value:"M",img:"genre/mystery.png"},{name:"Comics",value:"C",img:"genre/comics.png"},{name:"Magzines",value:"MG",img:"genre/magzine.png"}],readWays:[{name:"I read by myself",value:1,icon:"ion-android-contact"},{name:"I read with help",value:2,icon:"ion-android-contacts"},{name:"I actively listened",value:3,icon:"ion-headphone"}],grades:[{name:"Pre K",value:"prek"},{name:"Kindergarten",value:"k"},{name:"1st Grade",value:"1"},{name:"2nd Grade",value:"2"},{name:"3rd Grade",value:"3"},{name:"4th Grade",value:"4"},{name:"5th Grade",value:"5"},{name:"6th Grade",value:"6"},{name:"Would rather not tell",value:"other"}],schools:[{name:"Hawthorne Scholastic Academy",value:"Hawthorne",teachers:[{name:"Mr. Blake",value:"blake"},{name:"Ms. Bice",value:"bice"},{name:"Ms. Thomas",value:"thomas"}]},{name:"Skinner West Elementary School",value:"Skinner",teachers:[]}],constants:{GoogleApiSearchType:{isbn:"isbn",title:"title"},ModalTypes:{timer:"timer",stopwatch:"stopwatch",timeform:"timeform",scan:"scan",search:"search",bookform:"bookform"}}}});
angular.module("ionic.utils",[]).factory("$localstorage",["$window",function(t){return{set:function(o,l){t.localStorage[o]=l},get:function(o,l){return t.localStorage[o]||l},setObject:function(o,l){t.localStorage[o]=JSON.stringify(l)},getObject:function(o){var l=null;if(t.localStorage[o])try{l=JSON.parse(t.localStorage[o])}catch(n){l=null}return l}}}]);
angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function(n){"use strict";n.decorator("$browser",["$delegate","$window",function(n,e){function t(n){return/(iPhone|iPad|iPod).* OS 9_\d/.test(n)&&!/Version\/9\./.test(n)}function r(n){function e(){t=null}var t=null,r=n.url;return n.url=function(){return arguments.length?(t=arguments[0],r.apply(n,arguments)):t||r.apply(n,arguments)},window.addEventListener("popstate",e,!1),window.addEventListener("hashchange",e,!1),n}return t(e.navigator.userAgent)?r(n):n}])}]);
angular.module("readinglog.views",[]).run(["$templateCache",function(n){n.put("views/app/account.html",'<ion-view cache-view="false">\r\n  <ion-nav-buttons side="left">\r\n    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\r\n  </ion-nav-buttons>\r\n\r\n  <ion-content>\r\n    <div class="card">\r\n      <div class="item-divider">\r\n        Switch Account:\r\n      </div>\r\n      <div ng-click="account.goAnonymous()" class="item item-icon-left"  ng-if="!account.useranonymous">\r\n        <i class="icon ion-person"></i> Anonymous\r\n      </div>\r\n\r\n      <div ng-show="account.userList.length>0">\r\n        <div class="item" ng-repeat="user in account.userList track by user.username">\r\n            <div ng-if="account.currentUserName != user.username">\r\n                {{user.username}}\r\n               <button class="button button-small button-balanced"\r\n                       ng-click="account.switchAccount(user)">\r\n                 <i class="icon ion-android-contact"></i> Switch\r\n               </button>\r\n              <button class="button button-small button-assertive"\r\n                      ng-click="account.removeAccount(user)">\r\n                <i class="icon ion-close-circled"></i> Remove\r\n              </button>\r\n            </div>\r\n        </div>\r\n      </div>\r\n      <div class="item" ng-click="account.showAddAccount()">\r\n        Add Existing User\r\n      </div>\r\n\r\n      <div class="item" ng-show="account.showAdd">\r\n        <div class="row form-wrapper" style="background-color: #e3e3e3">\r\n          <div class="col">\r\n            <form name="login_form" class="" novalidate>\r\n              <div class="form-fields-outer list list-inset">\r\n                <label class="item item-input">\r\n                  <span class="input-label">User Name</span>\r\n                  <input type="text" name="username" ng-model="account.username" required>\r\n                </label>\r\n                <label class="item item-input">\r\n                  <span class="input-label">Access Code</span>\r\n                  <input type="text" ng-model="account.password" required>\r\n                </label>\r\n              </div>\r\n              <button type="submit" class="log-in button button-balanced" ng-click="account.doLogin()" ng-disabled="login_form.$invalid">\r\n                Go\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </ion-content>\r\n</ion-view>\r\n'),n.put("views/app/genre.html",'<ion-view class="feeds-categories-view">\r\n  <ion-nav-buttons side="left">\r\n    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\r\n  </ion-nav-buttons>\r\n\r\n  <ion-nav-title>\r\n        <span>Book Genres</span>\r\n    </ion-nav-title>\r\n    <ion-content>\r\n        <div class="row categories-list">\r\n            <div ng-repeat="genre in viewgenres.genres">\r\n                <a class="feed-category"  ui-sref="app.booksbygenre({genreId: (genre.value)})" >\r\n                    <img class="category-image" ng-src="img/{{genre.img}}">\r\n                    <div class="category-bg"></div>\r\n                    <span class="category-title">{{genre.name}}</span>\r\n                </a>\r\n            </div>\r\n           </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),n.put("views/app/readnow.html",'<ion-view cache-view="false">\r\n  <ion-nav-buttons side="left">\r\n    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\r\n  </ion-nav-buttons>\r\n\r\n    <ion-nav-title>\r\n        <span>Read A Book Now</span>\r\n    </ion-nav-title>\r\n    <ion-content>\r\n\r\n      <div class="card" ng-show="readNow.useranonymous"  style="background-color: #ffdddd; padding: 5px;">\r\n        Note: Currently you are in the temporary user mode. As a result,\r\n        your data may be lost.\r\n        To change, please <a ui-sref="app.accounts">Switch user</a>\r\n      </div>\r\n      <div class="card">\r\n            <div class="item item-divider">Book</div>\r\n            <div class="row">\r\n                <div class="col" ng-if="readNow.isMobileApp">\r\n                    <div ng-click="readNow.showModal(readNow.modalTypes.scan)">\r\n                        <i class="icon ion-qr-scanner"> Scan</i></div>\r\n                </div>\r\n                <div class="col">\r\n                    <div ng-click="readNow.showModal(readNow.modalTypes.search)">\r\n                        <i class="icon ion-search"> Search</i></div>\r\n                </div>\r\n                <div class="col">\r\n                    <div ng-click="readNow.showModal(readNow.modalTypes.bookform)">\r\n                        <i class="icon ion-edit"> Type it</i> </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="card">\r\n            <div class="item item-divider">Time</div>\r\n            <div class="row">\r\n                <div class="col">\r\n                    <div ng-click="readNow.showModal(readNow.modalTypes.stopwatch)">\r\n                        <i class="icon ion-ios-stopwatch-outline"> StopWatch</i>\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div ng-click="readNow.showModal(readNow.modalTypes.timer)">\r\n                        <i class="icon ion-ios-time"> Timer</i>\r\n                    </div>\r\n                </div>\r\n                <div class="col">\r\n                    <div ng-click="readNow.showModal(readNow.modalTypes.timeform)">\r\n                        <i class="icon ion-edit"> Type it</i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="list card" ng-show="readNow.book && readNow.book.title">\r\n\r\n            <div class="item item-body item-text-wrap">\r\n                <h2>Title: {{readNow.book.title}}</h2>\r\n                <p>Author: {{readNow.authorStr}}</p>\r\n                <p>Date: {{readNow.readingTimeStats.date}}</p>\r\n                <p>Reading Time: {{readNow.readingTimeStats.timeRead}} minutes</p>\r\n            </div>\r\n\r\n            <div class="item item-body item-text-wrap">\r\n                <img ng-src="{{readNow.book.smThumbnail}}" ng-show="readNow.book.smThumbnail.length>0" style="float:right">\r\n                <p class="left" style="margin-right:10px" ng-show="readNow.book.description.length>0">\r\n                    {{readNow.book.description}}\r\n                </p>\r\n            </div>\r\n        </div>\r\n\r\n\r\n      <div class="card">\r\n\r\n            <div class="item item-divider">Rating</div>\r\n            <div class="item">\r\n                <ionic-ratings ratingsobj=\'readNow.ratingsObject\'></ionic-ratings>\r\n            </div>\r\n        </div>\r\n        <div class="card">\r\n            <div class="item item-divider">Please select</div>\r\n\r\n            <label class="item item-input item-select">\r\n                    Genre\r\n                <select ng-model="readNow.genre">\r\n                    <option ng-repeat="item in readNow.bookCategories"\r\n                            value="{{item.value}}" ng-selected="{{item.value == readNow.genre}}">\r\n                        {{item.name}}\r\n                    </option>\r\n                </select>\r\n            </label>\r\n        </div>\r\n        <div class="card">\r\n\r\n            <div class="item item-divider">Please choose from the following</div>\r\n            <ion-list>\r\n                <ion-radio ng-repeat="item in readNow.readWays"\r\n                       ng-value="{{item.value}}"\r\n                       ng-model="readNow.readingHow">\r\n                       <i class="icon {{item.icon}}"></i> {{item.name}}\r\n                </ion-radio>\r\n            </ion-list>\r\n        </div>\r\n        <div class="card">\r\n          <div class="item item-divider">Reading Notes</div>\r\n          <div class="item">\r\n            <textarea ng-model="readNow.notes" style="border: 1px solid #ccc; width:90%;" rows="5" ></textarea>\r\n          </div>\r\n        </div>\r\n        <div>\r\n            <div class="item item-body bottom-content">\r\n                <button type="submit" class="button button-assertive" ng-click="readNow.onSubmit()">\r\n                    Submit\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),n.put("views/app/settings.html",'<ion-view class="settings-view">\r\n    <ion-nav-buttons side="left">\r\n        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\r\n    </ion-nav-buttons>\r\n\r\n    <ion-nav-title>\r\n        <span>Settings</span>\r\n    </ion-nav-title>\r\n\r\n    <ion-content>\r\n      <div class="card" ng-show="settings.useranonymous" style="background-color: #ffdddd; padding: 5px;">\r\n        Note: Currently you are in the temporary user mode.\r\n        To change, please <a ui-sref="app.accounts">Switch user</a>\r\n      </div>\r\n\r\n        <form class="css-form" novalidate ng-submit="settings.saveUserInfo(userForm.$valid)" name="userForm">\r\n\r\n            <div class="card">\r\n                <div class="item item-avatar padding item-thumbnail-left">\r\n                    <a  ng-show="settings.user.avartar" ng-click="settings.toggleImagePicker()"><img ng-src="img/avartar/{{settings.user.avartar}}" width="80" /></a>\r\n                    <a ng-show="!settings.user.avartar" ng-click="settings.toggleImagePicker()"><img ng-src="img/avartar/icon.png" width="80" /></a>\r\n                </div>\r\n                <div class="item" ng-show="settings.showPicker">\r\n                  <div ng-click="settings.setAvartar(avartar)"\r\n                       ng-repeat="avartar in settings.avartars">\r\n                    <img ng-src="img/avartar/{{avartar}}" style="float:left; margin: 5px">\r\n                  </div>\r\n                  <div class="clearfix"></div>\r\n                </div>\r\n\r\n                <div class="item">\r\n                  <label class="item item-input">\r\n                    <span class="input-label">Display Name</span>\r\n                      <input type="text" placeholder="Name" name="user_name" ng-model="settings.user.username" required>\r\n                  </label>\r\n                </div>\r\n              <div class="item">\r\n               <button type="submit" class="button button-assertive" ng-disabled="userForm.$invalid">Sumbit</button>\r\n              </div>\r\n            </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),n.put("views/app/side-menu.html",'<ion-side-menus enable-menu-with-back-views="false">\n    <ion-side-menu-content class="post-size-14px">\n        <ion-nav-bar class="bar app-top-bar">\n            <ion-nav-back-button>\n            </ion-nav-back-button>\n            <ion-nav-buttons side="left">\n                <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>\n            </ion-nav-buttons>\n        </ion-nav-bar>\n        <ion-nav-view name="menuContent"></ion-nav-view>\n    </ion-side-menu-content>\n\n    <ion-side-menu side="left" class="main-menu" expose-aside-when="(min-width:1024px)">\n        <ion-content>\n            <ion-list>\n                <ion-item class="heading-item item item-avatar" nav-clear menu-close  ui-sref="app.settings">\n                    <div class="user-image-container">\n                      <img ng-show="!sidemenu.user.avartar" class="user-image" ng-src="img/avartar/icon.png" />\n                      <img ng-show="sidemenu.user.avartar" class="user-image" ng-src="img/avartar/{{sidemenu.user.avartar}}">\n                    </div>\n                    <h2 class="greeting">Hi, {{sidemenu.user.username || \'You\'}}</h2>\n                </ion-item>\n\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.booklogform" >\n                    <i class="icon ion-ios-book"></i>\n                    <h2 class="menu-text">Read Now</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.viewall">\n                    <i class="icon ion-ios-albums"></i>\n                    <h2 class="menu-text">View All</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.viewgenres">\n                    <i class="icon ion-image"></i>\n                    <h2 class="menu-text">View Genres</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.stats">\n                    <i class="icon ion-ios-pie"></i>\n                    <h2 class="menu-text">Stats</h2>\n                </ion-item>\n                <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.weeklylog">\n                    <i class="icon ion-printer"></i>\n                    <h2 class="menu-text">Weekly</h2>\n                </ion-item>\n              <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.treasure">\n                <i class="icon ion-briefcase"></i>\n                <h2 class="menu-text">Treasure Chest</h2>\n              </ion-item>\n              <ion-item class="item-icon-left" nav-clear menu-close ui-sref="app.accounts">\n                  <i class="icon ion-android-contacts"></i>\n                  <h2 class="menu-text">Switch User</h2>\n                </ion-item>\n              <ion-item class="item-icon-left" style="background-color: transparent;" >\n\n                  <i class="icon ion-alert"></i>\n                  <div style="white-space: normal; color: #cccccc ">Web users, please use mouse wheel or drag page upwards or downwards for scrolling.</div>\n              </ion-item>\n            </ion-list>\n        </ion-content>\n    </ion-side-menu>\n</ion-side-menus>\n'),n.put("views/app/stats.html",'<ion-view>\r\n\r\n        <ion-nav-buttons side="left">\r\n            <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\r\n        </ion-nav-buttons>\r\n        <ion-nav-buttons side="right">\r\n          <button class="button button-clear" ng-click="stats.setTimeMode(\'weekly\');">\r\n                    <img src="img/weekly.png" width="40" height="40" style="margin-top:-5px" />\r\n          </button>\r\n         <button class="button button-clear" ng-click="stats.setTimeMode(\'monthly\');">\r\n                    <img src="img/monthly.png" width="40"  height="40" style="margin-top:-5px"/>\r\n            </button>\r\n          <button class="button button-clear" ng-click="stats.setTimeMode(\'yearly\');">\r\n                    <img src="img/recent.png"  width="40"  height="40" style="margin-top:-5px"/>\r\n        </button>\r\n    </ion-nav-buttons>\r\n\r\n   <ion-content  class="has-header">\r\n        <div ng-show="!stats.allBooksRead || stats.allBooksRead.length===0">\r\n\r\n          <p class="text-center"> Looks like you have not read any books!</p>\r\n           <a class="button button-clear button-block" ui-sref="app.booklogform">\r\n             <img src="img/treasure/Start_Reading.png">\r\n           </a>\r\n        </div>\r\n        <div ng-show="stats.allBooksRead && stats.allBooksRead.length>0">\r\n            <label class="item item-input item-select" ng-show="stats.mode == \'weekly\'">\r\n                <div class="input-label">\r\n                    Time Period:\r\n                </div>\r\n                <select ng-options="week as week.name for week in stats.weeks"\r\n                        ng-model="stats.weekselected" ng-change="stats.rechart()"></select>\r\n            </label>\r\n            <label class="item item-input item-select" ng-show="stats.mode == \'monthly\'">\r\n                <div class="input-label">\r\n                    Time Period:\r\n                </div>\r\n                <select ng-options="month as month.name for month in stats.months"\r\n                        ng-model="stats.monthselected" ng-change="stats.rechart()"></select>\r\n            </label>\r\n            <!-- Pie chart-->\r\n            <div class="card">\r\n                <div class="item item-divider">\r\n                    Daily Reading Time\r\n                </div>\r\n                <div class="item item-text-wrap">\r\n                    <canvas id="line" class="chart chart-line" data="stats.chartReadingData.data" labels="stats.chartReadingData.labels" legend="false"\r\n                            series="[\'timeread\']" chart-options="{showTooltips: false}"></canvas>\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class="card">\r\n                <div class="item item-divider">\r\n                    Time Read By Genre\r\n                </div>\r\n                <div class="item item-text-wrap">\r\n                    <canvas id="bar" class="chart chart-bar" data="stats.chartGenreData.data"\r\n                            labels="stats.chartGenreData.labels" legend="false" series="[\'genre\']" chart-options="{showTooltips: false}">\r\n                    </canvas>\r\n                </div>\r\n\r\n                <div class="item item-divider ">\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </div>\r\n        </ion-content>\r\n</ion-view>\r\n'),n.put("views/app/treasurebox.html",'<ion-view cache-view="false">\r\n  <ion-nav-buttons side="left">\r\n    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\r\n  </ion-nav-buttons>\r\n\r\n  <ion-content>\r\n\r\n    <div ng-if="!treasure.totalLogs">\r\n      <p class="text-center"> You have not earned any treasures.</p>\r\n      <a class="button button-clear button-block" ui-sref="app.booklogform">\r\n        <img src="img/treasure/Start_Reading.png">\r\n      </a>\r\n    </div>\r\n    <div class="card"  ng-if="treasure.totalLogs">\r\n      <div class="item-divider">\r\n        Treasure Chest:\r\n      </div>\r\n\r\n      <div>\r\n        <div class="item" ng-show="treasure.totalLogs">\r\n            <div>Tickets -- You have logged <span class="assertive">{{treasure.totalLogs}}</span> times </div>\r\n            <img class="treasure" ng-repeat="ticket in treasure.tickets" ng-src="img/treasure/{{ticket.img}}"  />\r\n          <div class="clearfix">\r\n          </div>\r\n        </div>\r\n        <div class="item" ng-show="treasure.toalMinutes">\r\n          <div> Stickers -- You have read <span class="assertive">{{treasure.toalMinutes}}</span> minutes </div>\r\n          <img class="treasure" ng-repeat="sticker in treasure.stickers" ng-src="img/treasure/{{sticker.img}}"  />\r\n          <div class="clearfix">\r\n          </div>\r\n        </div>\r\n        <div class="item" ng-show="treasure.totalGenres">\r\n          <div> Stars -- You have read <span class="assertive">{{treasure.totalGenres}}</span> genres </div>\r\n          <img class="treasure" ng-repeat="sticker in treasure.stars" ng-src="img/treasure/{{sticker.img}}"  />\r\n          <div class="clearfix">\r\n          </div>\r\n        </div>\r\n        <div class="item" ng-show="treasure.totalCoins">\r\n          <div> Coins -- Wow, you have logged over 100 times </div>\r\n          <img class="treasure" ng-repeat="sticker in treasure.coins" ng-src="img/treasure/{{sticker.img}}"  />\r\n          <div class="clearfix">\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </ion-content>\r\n</ion-view>\r\n'),n.put("views/app/viewall.html",'<ion-view cache-view="false">\r\n  <ion-nav-buttons side="left">\r\n    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\r\n  </ion-nav-buttons>\r\n\r\n    <ion-nav-title>\r\n        <span>Books </span><span ng-show="viewall.genreName  && viewall.genreName.length>0">in {{viewall.genreName}}</span>\r\n    </ion-nav-title>\r\n    <ion-nav-buttons side="secondary">\r\n        <button class="button button-icon icon ion-ios-search-strong" ng-click="viewall.showFilterBar()"></button>\r\n    </ion-nav-buttons>\r\n\r\n    <ion-content direction="y" scrollbar-y="false">\r\n\r\n        <div ng-show="viewall.error"><h3>{{viewall.error}}</h3></div>\r\n        <ion-list>\r\n\r\n            <ion-item ng-repeat="item in viewall.booklogs | orderBy: \'-timestamp\'">\r\n                <div class="item item-thumbnail-left">\r\n                    <img ng-src="{{item.smThumbnail}}" />\r\n                    <h2> {{item.title}}</h2>\r\n                    <p>\r\n                     Author: {{item.authorStr}}\r\n                    </p>\r\n                    <p>\r\n                       {{item.readMannerName}}\r\n                    </p>\r\n                    <p>\r\n                       Date: {{item.dateRead}}\r\n                    </p>\r\n                    <p> Reading Time: {{item.timeRead}} minutes\r\n                    </p>\r\n                    <p>\r\n                      Genre:  {{item.genreName}}\r\n                    </p>\r\n                    <div class="clearfix">\r\n                        <a ng-click="viewall.editLog(item)"><i class="ion-edit" style="position:absolute;left:10px;top:100px; color:#ff4c4c; font-size:24px"></i></a>\r\n                        <a ng-click="viewall.removeLog(item)"><i class="ion-trash-a" style="position:absolute;left:40px;top:100px;color:#ff4c4c; font-size:24px"></i></a>\r\n                </div>\r\n                </div>\r\n            </ion-item>\r\n        </ion-list>\r\n        <div ng-if="viewall.booklogs !== undefined && !viewall.booklogs.length" class="no-results">\r\n          <p class="text-center"> Looks like you have not read any books!</p>\r\n          <a class="button button-clear button-block" ui-sref="app.booklogform">\r\n            <img src="img/treasure/Start_Reading.png">\r\n          </a>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),n.put("views/app/weeklylog.html",'<ion-view cache-view="false">\r\n    <ion-nav-buttons side="left">\r\n        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>\r\n    </ion-nav-buttons>\r\n    <ion-nav-buttons side="right">\r\n      <button class="button button-clear" ng-print print-element-id="print-log">\r\n                <i class="icon ion-printer positive"></i>\r\n      </button>\r\n      <button ng-click="weeklylog.sendEmail()" class="button button-clear" ng-show="weeklylog.parentEmail">\r\n                <i class="icon ion-ios-email positive"></i>\r\n      </button>\r\n    </ion-nav-buttons>\r\n    <ion-nav-title>\r\n        <span>Weekly Log</span>\r\n    </ion-nav-title>\r\n\r\n    <ion-content>\r\n      <div class="button-bar">\r\n        <a class="button balanced" ng-click="weeklylog.getLogFor7Days()" ng-disabled="weeklylog.timeFrame == \'last7days\' " >Past 7 Days</a>\r\n        <a class="button balanced" ng-click="weeklylog.getLogForLastWeek()" ng-disabled="weeklylog.timeFrame == \'lastWeek\' ">Last Week</a>\r\n      </div>\r\n      <table style="width: 1025px; position: absolute; left: 20px; top: 60px;border:1px solid #ccc;border-collapse: collapse" id="print-log">\r\n                <thead>\r\n                    <tr>\r\n                        <td colspan="2" style="border-bottom:1px solid #ccc; border-collapse: collapse;height: 30px; text-align: center;vertical-align: middle">\r\n                            <h3 style="float: left">Name: {{weeklylog.username}}</h3>\r\n                        </td>\r\n                        <td colspan="4" style="border-bottom:1px solid #ccc; border-collapse: collapse;height: 30px; text-align: center;vertical-align: middle">\r\n                            <h3>{{weeklylog.timeDescription}}</h3>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td width="75px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"></td>\r\n                        <td width="400px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>Title & Author</h4></td>\r\n                        <td width="100px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>Genre *</h4></td>\r\n                        <td width="150px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>Rating</h4></td>\r\n                        <td width="150px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>I Read</h4></td>\r\n                        <td width="150px" style="height: 30px; border: 1px solid #ccc; border-collapse: collapse; text-align: center;"><h4>Reading Time</h4></td>\r\n\r\n                    </tr>\r\n                </thead>\r\n                <tbody ng-repeat="data in weeklylog.booksReadWeekly">\r\n                    <tr ng-repeat="book in data.books">\r\n                        <td ng-if="$index===0" width="75px" rowspan="{{data.books.length}}"\r\n                            style="border-right: 1px solid #ccc; border-bottom: 1px solid #ccc; border-collapse: collapse;">\r\n                            <div>{{data.name}}</div>\r\n                            <div>{{data.date}}</div>\r\n                        </td>\r\n\r\n                        <td width="400px" style="border-right:1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\r\n                            <span ng-if="book.title">{{book.title}}</span>\r\n                            <span ng-if="!book.title">&nbsp;</span>\r\n                            <div ng-if="book.authors" style="font-size: 12px">by {{book.authors}}</div>\r\n                        </td>\r\n                        <td width="100px" style="border-right: 1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\r\n                            <span ng-if="book.genre">{{book.genre}}</span>\r\n                            <span ng-if="!book.genre">&nbsp;</span>\r\n                        </td>\r\n                        <td width="150px" style="border-right:1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\r\n                            <span ng-repeat="i in book.starsArr track by $index"><img src="img/brown-star.png" width="15px"></img></span><span ng-repeat="i in book.nonStarsArr track by $index"><img src="img/empty-star.png" width="15px"></img></span>\r\n                        </td>\r\n                        <td width="150px" style="border-right: 1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\r\n                            <span ng-if="book.howIRead">{{book.howIRead}}</span>\r\n                            <span ng-if="!book.howIRead">&nbsp;</span>\r\n                        </td>\r\n                        <td width="150px" style="border-right:1px solid #ccc;border-bottom: 1px solid #ccc; border-collapse: collapse;">\r\n                            <div>Minutes: {{book.timeRead}}\r\n                            </div>\r\n                            <div>\r\n                            Parent Signature:\r\n                            <p>&nbsp;</p>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n\r\n                <tfoot>\r\n                    <tr>\r\n                        <td colspan="6" style="vertical-align: middle">\r\n                            <h1 >Total Minutes:<span style="font-size: 30px;color:red"> {{weeklylog.totalminutes}}</span></h1>\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n\r\n                        <td colspan="6" style="word-wrap: break-word">\r\n                            <span ng-repeat="genre in weeklylog.genres">\r\n                                * ({{genre.value}}) {{genre.name}}\r\n                            </span>\r\n                        </td>\r\n                    </tr>\r\n                  <tr>\r\n                    <td colspan="6" style="height:20px">\r\n                    </td>\r\n                  </tr>\r\n                </tfoot>\r\n            </table>\r\n\r\n    </ion-content>\r\n\r\n</ion-view>\r\n'),n.put("views/auth/auth.html",'<ion-nav-view class="auth-outer">\r\n    \r\n</ion-nav-view>\r\n'),n.put("views/auth/forgot-password.html",'<ion-view class="auth-view" cache-view="false">\r\n    <ion-nav-bar class="view-navigation">\r\n        <ion-nav-back-button>\r\n        </ion-nav-back-button>\r\n        <ion-nav-title>\r\n            <span>Reset your password</span>\r\n        </ion-nav-title>\r\n    </ion-nav-bar>\r\n    <ion-content class="padding">\r\n        <div class="row related-navigation">\r\n            <div class="col">\r\n                <a class="nav-left button button-clear" ui-sref="auth.login">\r\n                    Log In\r\n                </a>\r\n                <a class="nav-right button button-clear" ui-sref="auth.signup">\r\n                    Sign Up\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="row related-copy">\r\n            <div class="col">\r\n                <h5>Please enter your email address and we\'ll send you an email to reset your password.</h5>\r\n            </div>\r\n        </div>\r\n        <div class="row form-wrapper">\r\n            <div class="col">\r\n                <form name="forgot_password_form" class="" novalidate>\r\n                    <div class="form-fields-outer list list-inset">\r\n                        <label class="item item-input">\r\n                            <input type="email" placeholder="Email" name="email" ng-model="forgetPassword.user.email" required>\r\n                        </label>\r\n                    </div>\r\n                    <button type="submit" class="sign-up button button-block" ng-click="forgetPassword.requestNewPassword()" ng-disabled="forgot_password_form.$invalid">\r\n                        Reset Password\r\n                    </button>\r\n                    <p ng-show="forgetPassword.msg" class="message error">{{forgetPassword.msg}}</p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),n.put("views/auth/signup.html",'<ion-view class="auth-view" cache-view="false">\r\n    <ion-nav-bar class="view-navigation">\r\n        <ion-nav-back-button>\r\n        </ion-nav-back-button>\r\n        <ion-nav-title>\r\n            <span>Sign Up with Email</span>\r\n        </ion-nav-title>\r\n    </ion-nav-bar>\r\n    <ion-content class="padding">\r\n        <div class="row related-navigation">\r\n            <div class="col">\r\n                <a class="nav-right button button-clear" ui-sref="auth.login">\r\n                    Log In\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="row form-wrapper">\r\n            <div class="col">\r\n                <form name="signup_form" class="" novalidate>\r\n                    <div class="form-fields-outer list list-inset">\r\n                        <label class="item item-input">\r\n                            <input type="email" placeholder="Email" name="email" ng-model="signup.user.email" required>\r\n                        </label>\r\n                        <label class="item item-input" show-hide-container>\r\n                            <input type="password" placeholder="Password" name="password" ng-model="signup.user.password" required show-hide-input>\r\n                        </label>\r\n                        <!--<label class="item item-input">\r\n                            <input type="text" placeholder="First Name" name="first_name" ng-model="user.first_name" required>\r\n                        </label>\r\n                        <label class="item item-input">\r\n                            <input type="text" placeholder="Last Name" name="last_name" ng-model="user.last_name" required>\r\n                        </label>-->\r\n                    </div>\r\n                    <button type="submit" class="sign-up button button-block" ng-click="signup.doSignUp()" ng-disabled="signup_form.$invalid">\r\n                        Sign Up\r\n                    </button>\r\n                    <p ng-show="signup.error" class="message error">{{signup.error}}</p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n</ion-view>\r\n'),
n.put("views/directives/bookitem.html",'\r\n<div class="item item-body item-text-wrap" ng-show="bookInfo != null" >\r\n    <div class="book-item" style="position:relative">\r\n        <h3 class="title">\r\n            {{bookInfo.title}} <br />\r\n            <h6>By: {{bookInfo.authors}}</h6>\r\n        </h3>\r\n        <div style="max-height:90%;overflow:auto">\r\n            <a target="_blank" ng-href="{{bookInfo.previewLink}}" style="float:right; margin:0 10px">\r\n                <img ng-src="{{bookInfo.smThumbnail}}">\r\n            </a>\r\n            <div>{{bookInfo.description}}</div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("views/modal/bookentry.html",'<ion-modal-view class="modal" ng-controller="appBookEntry as bookEntry" class="full-size">\r\n    <ion-header-bar class="bar-balanced">\r\n        <h1 class="title">Log my book</h1>\r\n        <div class="button button-clear" ng-click="bookEntry.closeBookEntryModal()">\r\n          <span class="icon ion-close"></span></div>\r\n    </ion-header-bar>\r\n    <ion-content>\r\n        <label class="item item-input full-size">\r\n          <span class="input-label">Title</span>\r\n            <input type="text" required placeholder="Book Title" ng-model="bookEntry.title">\r\n        </label>\r\n      <label class="item item-input full-size">\r\n        <span class="input-label">Author</span>\r\n        <input type="text" required placeholder="Author" ng-model="bookEntry.authorname">\r\n      </label>\r\n    </ion-content>\r\n    <ion-footer-bar class="bar-balanced"  align-title="center">\r\n        <div class="title" ng-click="setBookInfo(null, bookEntry.title, bookEntry.authorname);bookEntry.closeBookEntryModal()">Ok</div>\r\n    </ion-footer-bar>\r\n</ion-modal-view>\r\n'),n.put("views/modal/bookscan.html",'<ion-modal-view class="full-size" ng-controller="appBookScan as bookscan" >\r\n    <ion-header-bar class="bar-balanced">\r\n        <h1 class="title">Book Scan</h1>\r\n        <div class="button button-clear" ng-click="bookscan.closebookScanModal()"><span class="icon ion-close"></span></div>\r\n    </ion-header-bar>\r\n    <ion-content>\r\n        <a ng-click="bookscan.scanMyBookNow()" class="text-center">\r\n            <img src="img/barcodescanner.png" style="display:block;margin-left:auto;margin-right:auto"/> \r\n            <h4>Scan Your Book</h4>\r\n        </a>\r\n      \r\n        <div class="card">\r\n            <div class="item item-text-wrap">\r\n                {{bookscan.scanResults.text}}\r\n            </div>\r\n            <bookitem book-info="bookscan.bookInfo" ng-if="bookscan.bookInfo"></bookitem>\r\n        </div>\r\n    </ion-content>\r\n    <ion-footer-bar class="bar-balanced" align-title="center">\r\n        <div class="title" ng-click="setBookInfo(bookscan.bookInfo);bookscan.closebookScanModal()">Ok</div>\r\n    </ion-footer-bar>\r\n</ion-modal-view>\r\n'),n.put("views/modal/booksearch.html",'<ion-modal-view ng-controller="appBookSearch as bookSearch" class="full-size">\r\n    <ion-header-bar class="bar-balanced">\r\n        <h1 class="title">Search your book</h1>\r\n        <div class="button button-clear" ng-click="bookSearch.closebookSearchModal()">\r\n          <span class="icon ion-close"></span></div>\r\n    </ion-header-bar>\r\n    <ion-content>\r\n\r\n            <div class="item item-input">\r\n                <i class="icon ion-search placeholder-icon"></i>\r\n                <input type="search" placeholder="Search your book by title"\r\n                       ng-model="bookSearch.query"\r\n                       required\r\n                       ng-change="bookSearch.getBookTitles()">\r\n                <button ng-click="bookSearch.clearSearch()"\r\n                        class="button ion-close-circled\r\n                        input-button button-clear" style="color:red" ng-show="bookSearch.query.length">\r\n                </button>\r\n            </div>\r\n            <div class="list" ng-show="bookSearch.searchResultTitles.length>0">\r\n                <li class="item  item-thumbnail-left" ng-repeat="title in bookSearch.searchResultTitles"\r\n                    ng-click="bookSearch.setBookTitleAndSearch(title)"><img ng-src="{{title.thumbnail}}" height="35" />\r\n                  {{title.title}} <br>By <span style="font-size:small">{{title.authors}}</span> </li>\r\n            </div>\r\n            <div class="card" ng-show="bookSearch.bookInfo != null">\r\n                <bookitem book-info="bookSearch.bookInfo"></bookitem>\r\n            </div>\r\n\r\n        </ion-content>\r\n    <ion-footer-bar class="bar-balanced" align-title="center">\r\n        <div class="title" ng-click="setBookInfo(bookSearch.bookInfo);bookSearch.closebookSearchModal()">Ok</div>\r\n   </ion-footer-bar>\r\n</ion-modal-view>\r\n'),n.put("views/modal/stopwatch.html",'<ion-modal-view class="full-size" ng-controller="appStopWatch as stopWatch">\r\n    <ion-header-bar class="bar-balanced">\r\n        <h1 class="title">Stop Watch</h1>\r\n        <div class="button button-clear" ng-click="stopWatch.closeStopWatchModal()"><span class="icon ion-close"></span></div>\r\n    </ion-header-bar>\r\n    <ion-content>\r\n        <div class="card padding">\r\n\r\n            <div class="row padding">\r\n                <div class="col center">\r\n                    <h1 class="stop-watch">\r\n                        <basictimer interval="1000" autostart="false">\r\n                        {{hhours}} : {{mminutes}} : {{sseconds}} \r\n                        </basictimer>\r\n                    </h1>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col center">\r\n                    <a class="button button-icon icon ion-trash-b" ng-click="stopWatch.resetTimer()"></a>\r\n                </div>\r\n                <div class="col center">\r\n                    <a class="button icon ion-play button-assertive" ng-click="stopWatch.startTimer()" ng-show="!timerRunning || $scope.timerPaused"></a>\r\n                    <a class="button icon ion-pause button-assertive" ng-click="stopWatch.stopTimer()" ng-show="timerRunning"></a>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </ion-content>\r\n    <ion-footer-bar class="bar-balanced" align-title="center">\r\n        <div class="title" ng-click="stopWatch.setTimeInfo();stopWatch.closeStopWatchModal()">Ok</div>\r\n    </ion-footer-bar>\r\n</ion-modal-view>'),n.put("views/modal/timeform.html",'<ion-modal-view class="full-size" ng-controller="appTimeForm as timeForm">\r\n    <ion-header-bar class="bar-balanced">\r\n        <h1 class="title">Log my time in reading</h1>\r\n        <div class="button button-clear" ng-click="timeForm.closeTimeFormModal()"><span class="icon ion-close"></span></div>\r\n    </ion-header-bar>\r\n    <ion-content>\r\n\r\n            <div class="row">\r\n                <ionic-datepicker idate="currentDate"\r\n                                  disablepreviousdates="false"\r\n                                  disablefuturedates="true"\r\n                                  callback="timeForm.datePickerCallback"\r\n                                  title="title">\r\n                    <button class="button button-block button-positive"> {{ currentDate | date:\'dd - MMMM - yyyy\' }} </button>\r\n                </ionic-datepicker>\r\n            </div>\r\n            <div class="row">\r\n                <label class="item item-input full-size">\r\n                    <input type="number" required placeholder="Reading minutes"\r\n                           ng-model="timeForm.minutes">\r\n                </label>\r\n            </div>\r\n    </ion-content>\r\n    <ion-footer-bar class="bar-balanced" align-title="center">\r\n        <div class="title" ng-click="timeForm.setTimeInfo( );timeForm.closeTimeFormModal()">Ok</div>\r\n    </ion-footer-bar>\r\n</ion-modal-view>\r\n'),n.put("views/modal/timer.html",'<ion-modal-view class="full-size" ng-controller="appTimer as timer">\r\n    <ion-header-bar class="bar-balanced">\r\n        <h1 class="title">Timer</h1>\r\n        <div class="button button-clear" ng-click="timer.closeTimerModal()"><span class="icon ion-close"></span></div>\r\n    </ion-header-bar>\r\n      <ion-content>\r\n          <div class="bar bar-header item-input-inset">\r\n              <label class="item-input-wrapper">\r\n                  <input type="number" placeholder="Minutes I plan to read" \r\n                         ng-model="timer.minutes" \r\n                         ng-change="timer.setDuration()" min="0"\r\n                         auto-start="false"\r\n                         max="60">\r\n              </label>\r\n          </div>\r\n\r\n          <div class="card">\r\n              <div class="row padding" ng-click="timer.toggleTimer()">\r\n                  <ion-timer duration="timer.duration" opts="timer.ionTimerOpts" class="basic-timer"></ion-timer>\r\n              </div>\r\n\r\n              <div class="row">\r\n                  <div class="col center">\r\n                      <a class="button button-icon icon ion-trash-b" ng-click="timer.stopTimer()"></a>\r\n                  </div>\r\n                  <div class="col center">\r\n                      <a class="button icon ion-play button-assertive" ng-click="timer.toggleTimer()" ng-show="timer.ionTimerOpts.controls.status() == \'PAUSED\' || timer.ionTimerOpts.controls.status() == \'STOPPED\'"></a>\r\n                      <a class="button icon ion-pause button-assertive" ng-click="timer.toggleTimer()" ng-show="timer.ionTimerOpts.controls.status() == \'STARTED\'"></a>\r\n                  </div>\r\n\r\n              </div>\r\n          </div>\r\n          </ion-content>\r\n          <ion-footer-bar class="bar-balanced"  align-title="center">\r\n              <div class="title" ng-click="timer.setTimerInfo();timer.closeTimerModal()">Ok</div>\r\n          </ion-footer-bar>\r\n</ion-modal-view>\r\n')}]);
!function(){"use strict";angular.module("app.basictimer",[]).directive("basictimer",["$compile",function(t){return{restrict:"EA",replace:!1,scope:{interval:"=interval",startTimeAttr:"=startTime",endTimeAttr:"=endTime",countdownattr:"=countdown",autoStart:"&autoStart",maxTimeUnit:"=",seconds:"=?",minutes:"=?",hours:"=?"},controller:["$scope","$element","$attrs","$timeout",function(n,i,e,o){function s(){n.timeoutId&&clearTimeout(n.timeoutId)}function r(){void 0!==e.startTime&&(n.millis=moment().diff(moment(n.startTimeAttr))),n.maxTimeUnit&&"day"!==n.maxTimeUnit?"second"===n.maxTimeUnit?(n.seconds=Math.floor(n.millis/1e3),n.minutes=0,n.hours=0,n.days=0,n.months=0,n.years=0):"minute"===n.maxTimeUnit?(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4),n.hours=0,n.days=0,n.months=0,n.years=0):"hour"===n.maxTimeUnit&&(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4%60),n.hours=Math.floor(n.millis/36e5),n.days=0,n.months=0,n.years=0):(n.seconds=Math.floor(n.millis/1e3%60),n.minutes=Math.floor(n.millis/6e4%60),n.hours=Math.floor(n.millis/36e5%24),n.days=Math.floor(n.millis/36e5/24),n.months=0,n.years=0),n.sseconds=n.seconds<10?"0"+n.seconds:n.seconds,n.mminutes=n.minutes<10?"0"+n.minutes:n.minutes,n.hhours=n.hours<10?"0"+n.hours:n.hours,n.ddays=n.days<10?"0"+n.days:n.days,n.mmonths=n.months<10?"0"+n.months:n.months,n.yyears=n.years<10?"0"+n.years:n.years}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),n.autoStart=e.autoStart||e.autostart,n.fallback=n.fallback||"en",0===i.html().trim().length?i.append(t("<span>"+$interpolate.startSymbol()+"millis"+$interpolate.endSymbol()+"</span>")(n)):i.append(t(i.contents())(n)),n.startTime=null,n.endTime=null,n.timeoutId=null,n.countdown=angular.isNumber(n.countdownattr)&&parseInt(n.countdownattr,10)>=0?parseInt(n.countdownattr,10):void 0,n.isRunning=!1,n.$on("timer-start",function(){n.start()}),n.$on("timer-resume",function(){n.resume()}),n.$on("timer-stop",function(){n.stop()}),n.$on("timer-clear",function(){n.clear()}),n.$on("timer-reset",function(){n.reset()}),n.$on("timer-set-countdown",function(t,i){n.countdown=i}),n.$watch("startTimeAttr",function(t,i){t!==i&&n.isRunning&&n.start()}),n.$watch("endTimeAttr",function(t,i){t!==i&&n.isRunning&&n.start()}),n.start=i[0].start=function(){n.startTime=n.startTimeAttr?moment(n.startTimeAttr):moment(),n.endTime=n.endTimeAttr?moment(n.endTimeAttr):null,angular.isNumber(n.countdown)||(n.countdown=angular.isNumber(n.countdownattr)&&parseInt(n.countdownattr,10)>0?parseInt(n.countdownattr,10):void 0),s(),m(),n.isRunning=!0},n.resume=i[0].resume=function(){s(),n.countdownattr&&(n.countdown+=1),n.startTime=moment().diff(moment(n.stoppedTime).diff(moment(n.startTime))),m(),n.isRunning=!0},n.stop=n.pause=i[0].stop=i[0].pause=function(){var t=n.timeoutId;n.clear(),n.$emit("timer-stopped",{timeoutId:t,millis:n.millis,seconds:n.seconds,minutes:n.minutes,hours:n.hours,days:n.days})},n.clear=i[0].clear=function(){n.stoppedTime=moment(),s(),n.timeoutId=null,n.isRunning=!1},n.reset=i[0].reset=function(){n.startTime=n.startTimeAttr?moment(n.startTimeAttr):moment(),n.endTime=n.endTimeAttr?moment(n.endTimeAttr):null,n.countdown=angular.isNumber(n.countdownattr)&&parseInt(n.countdownattr,10)>0?parseInt(n.countdownattr,10):void 0,s(),m(),n.isRunning=!1,n.clear()},i.bind("$destroy",function(){s(),n.isRunning=!1}),n.countdownattr?(n.millis=1e3*n.countdownattr,n.addCDSeconds=i[0].addCDSeconds=function(t){n.countdown+=t,n.$digest(),n.isRunning||n.start()},n.$on("timer-add-cd-seconds",function(t,i){o(function(){n.addCDSeconds(i)})}),n.$on("timer-set-countdown-seconds",function(t,i){n.isRunning||n.clear(),n.countdown=i,n.millis=1e3*i,r()})):n.millis=0,r();var m=function a(){var t=null;n.millis=moment().diff(n.startTime);var i=n.millis%1e3;return n.endTimeAttr&&(t=n.endTimeAttr,n.millis=moment(n.endTime).diff(moment()),i=n.interval-n.millis%1e3),n.countdownattr&&(t=n.countdownattr,n.millis=1e3*n.countdown),n.millis<0?(n.stop(),n.millis=0,r(),void(n.finishCallback&&n.$eval(n.finishCallback))):(r(),n.timeoutId=setTimeout(function(){a(),n.$digest()},n.interval-i),n.$emit("timer-tick",{timeoutId:n.timeoutId,millis:n.millis}),void(n.countdown>0?n.countdown--:n.countdown<=0&&(n.stop(),n.finishCallback&&n.$eval(n.finishCallback))))};(void 0===n.autoStart||n.autoStart===!0)&&n.start()}]}}])}();
!function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{bookInfo:"="},templateUrl:"views/directives/bookitem.html"}}angular.module("app.bookitem",[]).directive("bookitem",e)}();
!function(){"use strict";angular.module("app.directives",["app.bookitem","app.basictimer","ionic-datepicker","app.print"])}();
!function(){"use strict";function n(n){function t(n,t,o){t.on("click",function(){var n=document.getElementById(o.printElementId);n&&e(n)}),window.onafterprint=function(){i.innerHTML=""}}function e(n){var t=n.cloneNode(!0);i.appendChild(t),window.print()}var i=document.getElementById("printSection");return i||(i=document.createElement("div"),i.id="printSection",document.body.appendChild(i)),{link:t,restrict:"A"}}angular.module("app.print",[]).directive("ngPrint",n),n.$inject=["$ionicPopup"]}();
!function(){"use strict";function e(e,n,t){var r=this,o=t.constants.GoogleApiSearchType,s="AIzaSyCwyh4Zj1QuxhBsR3LfZHnrzI1p2gnkxdI",a=function(e,n){var t="";switch(e){case o.isbn:t=i+"?key="+s+"&q=isbn:"+n;break;case o.title:t=i+"?key="+s+"&q="+n}return t},l=function(i){var t=n.defer();return e.get(i).then(function(e){t.resolve(e.data)}),t.promise};r.searchTitleOnly=function(e){var i=a(o.title,e);return i+="&maxResults=10&fields=items(volumeInfo)&orderBy=relevance",l(i)},r.search=function(i,t){var r=n.defer(),o=a(i,t);return o+="&maxResults=1&fields=items%2FvolumeInfo&orderBy=relevance",e.get(o).then(function(e){r.resolve(e.data)}),r.promise},r.getBookInfo=function(e){var i=e.volumeInfo,n={title:i.title,link:i.infoLink,smThumbnail:i.imageLinks&&i.imageLinks.smallThumbnail?i.imageLinks.smallThumbnail:"img/image-missing-md.png",description:i.description&&i.description.length>500?i.description.substring(0,500)+"...":i.description,previewLink:i.previewLink,authors:i.authors};return n}}var i="https://www.googleapis.com/books/v1/volumes";angular.module("app.GoogleApiService",[]).service("GoogleApiService",e),e.$inject=["$http","$q","appGlobalConfigService"]}();
!function(){"use strict";function e(){function e(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear().toString().substring(2,4)}function t(t,a,n){switch(t){case 0:return"This "+n;case 1:return"Last "+n;default:return("week"==n?"Week":"Month")+" Of "+e(a)}}function a(e){var t=new Date,a=t.getDay(),n=r(e);return n.length>1?0===a?n[0]:n[1]:null}function n(){var e=new Date;return{name:"Past 7 Days",startDate:e.addDays(-6),endDate:e}}function r(e){var a,n=new Date,r=n.getDay(),D=new Date((new Date).setDate(n.getDate()-r)),s=[];for(a=0;u>a;a++){var i=D.getTime(),g=new Date(new Date(i).setDate(D.getDate()-7*a)),o=new Date(new Date(g.getTime()).setDate(g.getDate()+6)),w=e>=g;if(s.push({name:t(a,g,"week"),startDate:w?e:g,endDate:o>n?n:o}),w)break}return s}function D(e){var a,n=new Date,r=n.getMonth(),D=n.getFullYear(),s=[];for(a=0;i>a;a++){var u=new Date(D,r,1,0,0,0),g=new Date(u.setMonth(r-a)),o=new Date(new Date(g.getTime()).setMonth(g.getMonth()+1)-1),w=e>=g;if(s.push({name:t(a,g,"month"),startDate:w?e:g,endDate:o>n?n:o}),w)break}return s}var s=this,u=12,i=6;s.getLastSixMonths=D,s.getLastTwelveWeeks=r,s.getLastWeekDates=a,s.getLastSevenDays=n}angular.module("app.dateTimeService",[]).service("appDateTimeService",e)}();
!function(){"use strict";function e(e,r){function t(t){var o=e.defer(),a=n(t);return r({url:i,method:"POST",data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){o.resolve(e)}),o.promise}var i="http://rlmail.azurewebsites.net/api/email";return{sendEmail:t}}function n(e){var n=[];for(var r in e)n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.join("&")}angular.module("app.emailService",[]).service("appEmailService",e),e.$inject=["$q","$http"]}();
!function(){"use strict";function e(e){var r=this,t=new Date,a=t.getDate()+"_"+t.getMonth()+"_"+t.getFullYear(),o="https://fiery-torch-1756.firebaseio.com/feedbacks"+a,i=new Firebase(o);r.addFeedback=function(r){var t=e.defer();return r.platform=log_currentPlatform,r.platformVersion=log_currentPlatformVersion,i.push(r,function(){t.resolve()}),t.promise}}angular.module("app.feedbackService",["firebase"]).service("appFeedbackService",e),e.$inject=["$q"]}();
!function(){"use strict";function e(e,n,t,o){function i(r){var n=e.defer();return h.authWithOAuthPopup(r,function(e,r){e&&n.reject(e),r&&n.resolve(r)}),n.promise}function u(r){var n=e.defer();return h.authWithPassword(r,function(e,r){e&&n.reject(e),r&&n.resolve(r)}),n.promise}function c(){var r=e.defer();return h.authAnonymously(function(e,n){n&&r.resolve(n),e&&r.reject(e)},{remember:"sessionOnly"}),r.promise}function s(r){var n=e.defer();return h.createUser(r,function(e){e?n.reject(e):n.resolve()}),n.promise}function a(e){return s(e).then(function(){return u(e)})}function f(r){var n=e.defer();return h.resetPassword(r,function(e){null===e?n.resolve("Password reset email sent successfully"):n.reject(e)}),n.promise}var l=this,h=new Firebase(r);l.logIn=function(e){return u(e)},l.signUpAndLogin=function(e){return a(e)},l.signOut=function(){h.unauth(),l.clearCache()},l.clearCache=function(){o(function(){t.clearCache(),t.clearHistory(),t.nextViewOptions({disableBack:!0,historyRoot:!0})},30)},l.resetPassword=function(e){return f(e)},l.facebookLogin=function(){return i("facebook")},l.googleLogin=function(){return i("google")},l.authAnonymously=c}var r="https://fiery-torch-1756.firebaseio.com";angular.module("app.fireBaseAuthService",["firebase"]).service("appFireBaseAuthService",e),e.$inject=["$q","$rootScope","$ionicHistory","$timeout"]}();
!function(){"use strict";function e(e,o){function t(r){var o=e.defer();return o.reject(r),o.promise}var n=this,i=new Firebase(r),u={};n.getBookLogsByUser=function(){var e=i.getAuth();if(!e)return null;var t=new Firebase(r+"booklogs"),n=t.child(e.uid);return o(n)},n.addBookLog=function(r){var o=e.defer(),t=n.getBookLogsByUser();return t.$add(r).then(function(e){o.resolve(t)}),o.promise},n.editBookLog=function(r){var o=e.defer();return n.getBookLogsByUser().$loaded().then(function(e){var n=e.$getRecord(r.$id);n&&e.$save(angular.extend(n,r)).then(function(r){o.resolve(e)},t)},t),o.promise},n.removeBookLog=function(r){var o=e.defer();return n.getBookLogsByUser().$loaded().then(function(e){var t=e.$getRecord(r.$id);e.$remove(t).then(function(e){o.resolve(e)})},t),o.promise},n.setCurrentBookEdit=function(e){u=e},n.getCurrentBookEdit=function(){return u},n.getBookDescription=function(e){return e&&e.length>500?e.substring(0,500)+"...":e},n.getBookAuthors=function(e){return e&&Array.isArray(e)?e.join(","):e}}var r="https://fiery-torch-1756.firebaseio.com/";angular.module("app.fireBaseBookService",["firebase"]).service("appFireBaseBookService",e),e.$inject=["$q","$firebaseArray"]}();
!function(){"use strict";angular.module("app.services",["app.fireBaseBookService","app.GoogleApiService","app.fireBaseAuthService","app.userService","app.dateTimeService","app.emailService","app.feedbackService"])}();
!function(){"use strict";function e(e,t,n){function u(r){var t=e.defer(),u=l.getAuth();if(u){var o=l.child("users").child(u.uid);o.update(r,function(){n.alert({title:"Great",template:"Thanks! You are fantastic"}),t.resolve()})}else t.reject("woo. user does not exist");return t.promise}function o(r){var t,n=e.defer(),u=l.getAuth();return u||n.reject({error:"user not registered"}),t=l.child("users").child(u.uid),t.once("value",function(e){var u=e.val();u?n.resolve(u):t.set(r,function(){n.resolve(r)})}),n.promise}function a(e){return e.auth&&e.auth.provider&&"anonymous"===e.auth.provider}function i(){var r,t=e.defer(),n=l.getAuth();return n?(n.auth&&n.auth.provider&&"anonymous"===n.auth.provider?t.resolve(n):(r=l.child("users").child(n.uid),r.once("value",function(e){var r=e.val();r||t.resolve(null),t.resolve(r||null)})),t.promise):(t.reject("user not authenticated"),t.promise)}function s(r){var t=e.defer(),n=i();return n.then(function(e){return null!==e?(t.resolve(e),t):o(r)}),t.promise}var c=this,l=new Firebase(r);c.setDefaultAvartar=function(e){e&&e.avartar&&e.avartar.indexOf("data")>=0&&(e.avartar="icon.png")},c.saveCustomUserDataAndSetUser=function(e){return s(e)},c.getUserInfo=i,c.saveUserInfo=function(e){return u(e)},c.storeUserInfoToLocal=function(e){t.setObject("currentuser",e)},c.isUserAuthenticated=function(){var e=l.getAuth();return null!==e},c.isInAnonymousMode=a}var r="https://fiery-torch-1756.firebaseio.com";angular.module("app.userService",["firebase"]).service("appUserService",e),e.$inject=["$q","$localstorage","$ionicPopup"]}();
!function(){"use strict";function e(e,n,o,s,r,t,a){function u(e){r.clearCache(),t.getUserInfo().then(function(e){e?(a.setObject(g,e),m.currentUserName=e.username,m.addExistingUser&&i(e),n.$broadcast("user-changed",e),s.go("app.booklogform")):d("something went wrong")})}function i(e){e.email=m.email,e.password=m.password,c(e,m.userList),a.setObject(l,m.userList),m.username="",m.password="",m.showAdd=!1}function c(e,n){var o,s=[],r=m.userList.length;for(o=0;r>o;o++)s.push(n[o].username.toLowerCase());s.indexOf(e.username.toLocaleLowerCase())<0&&n.push(e)}function d(e){o.alert({title:"Sorry",template:"The account information provided is not valid"})}var m=this,l="readingLogUserList",g="currentUser",p=a.getObject(l);p&&0!==Object.getOwnPropertyNames(p).length||(p=[],a.setObject(l,p)),m.userList=p,m.showAdd=!1,t.getUserInfo().then(function(e){a.setObject(g,e),m.currentUserName=e?e.username:"",null===e?m.useranonymous=!0:m.useranonymous=t.isInAnonymousMode(e)},function(e){m.useranonymous=!0}),m.showAddAccount=function(){m.showAdd=!m.showAdd},m.removeAccount=function(e){var n,o,s=m.userList,r=m.userList.length;for(n=0;r>n;n++)if(s[n].username===e.username){o=n;break}s.splice(o,1),m.userList=s,a.set(l,s)},m.goAnonymous=function(){r.signOut();var e=r.authAnonymously();e.then(function(){n.$broadcast("user-changed",null),s.go("app.booklogform")},d)},m.doLogin=function(){m.addExistingUser=!0;var e=m.username.indexOf("@")>=0?m.username:m.username.toLowerCase()+"@readinglog.com";m.email=e;var n=r.logIn({email:e,password:m.password});n.then(u,d)},m.switchAccount=function(e){if(e.username!==m.currentUserName){m.addExistingUser=!1;var n=r.logIn({email:e.email,password:e.password});n.then(u,d)}}}angular.module("app.accounts",[]).controller("appAccount",e),e.$inject=["$scope","$rootScope","$ionicPopup","$state","appFireBaseAuthService","appUserService","$localstorage"]}();
!function(){"use strict";function e(e,n){var r=this,i=n.genres;r.genres=i}angular.module("app.viewGenres",[]).controller("appViewGenres",e),e.$inject=["$scope","appGlobalConfigService"]}();
!function(){"use strict";angular.module("app.modules",["app.stats","app.sidemenu","app.settings","app.readnow","app.viewall","app.modals","app.treasure","app.directives","app.viewGenres","app.weeklylog","app.accounts"])}();
!function(){"use strict";function o(o,t,i,r,s,l,m,d,c){var u=this,h=s.constants.ModalTypes;if(u.isMobileApp=window.isMobileApp,u.isEditing=m.edit,u.readingHow=1,u.genre="NF",u.notes="",a(o,t,s),c.getUserInfo().then(function(o){null===o?u.useranonymous=!0:u.useranonymous=c.isInAnonymousMode(o)},function(o){u.useranonymous=!0}),u.showModal=function(e){n(o,e,h)},u.bookCategories=s.genres,u.readWays=s.readWays,u.modalTypes=h,u.ratingsObject={iconOn:"ion-ios-star",iconOff:"ion-ios-star-outline",iconOnColor:"rgb(200, 200, 100)",iconOffColor:"rgb(200, 100, 100)",rating:0,minRating:1,callback:function(o){u.rating=o}},"true"===u.isEditing){var g=r.getCurrentBookEdit();u.readingTimeStats={timeRead:g.timeRead,date:g.dateRead},u.book={title:g.title,authors:g.authors,smThumbnail:g.smThumbnail,description:g.description},u.authorStr=r.getBookAuthors(g.authors),u.genre=g.genre||"NF",u.rating=g.rating||1,u.readingHow=g.readingSel||1,u.ratingsObject.rating=u.rating,u.notes=g.notes||""}else u.readingTimeStats={timeRead:0,date:(new Date).toDateString()};o.setBookInfo=function(o,e,t){o=o||{title:e,authors:t},u.book=o,u.authorStr=r.getBookAuthors(o.authors)},o.setReadingTimeInfo=function(o,e,t){var a=e||0;u.readingTimeStats={timeRead:60*a+o,date:t?t.toDateString():(new Date).toDateString()}},u.onSubmit=function(){var o;if(null!==u.book&&u.book&&u.book.title&&u.book.title.length>0&&null!==u.readingTimeStats&&u.readingTimeStats.timeRead>0&&(o={title:u.book.title,authors:u.book.authors||"",smThumbnail:u.book.smThumbnail||"img/image-missing-md.png",description:r.getBookDescription(u.book.description)||"",dateRead:u.readingTimeStats.date||new Date,timeRead:u.readingTimeStats.timeRead||0,genre:u.genre||"NF",rating:u.rating||1,readingSel:u.readingHow||1,notes:u.notes}),!o){var t=i.alert({title:"Please set the book title and minutes you have read",template:"You probably forgot?"});return t.then(function(o){}),!1}var a;if(u.isEditing){var n=angular.extend(g,o);"undefined"==typeof n.authorStr&&(n.authorStr=""),a=r.editBookLog(n)}else a=r.addBookLog(o);a.then(function(o){return d.clearCache(),e(i,l)})}}function e(o,e){var t=o.alert({title:"Woo-hoo",template:"Thanks! We have logged your book"});t.then(function(o){e.go("app.viewall")})}function t(o,e){return{scope:o,backdropClickToClose:!0,animation:"slide-in-up",id:e}}function a(o,e,a){var n=a.constants.ModalTypes;e.fromTemplateUrl("views/modal/stopwatch.html",t(o,n.stopwatch)).then(function(e){o.stopWatchModal=e}),e.fromTemplateUrl("views/modal/timer.html",t(o,n.timer)).then(function(e){o.timerModal=e}),e.fromTemplateUrl("views/modal/timeform.html",t(o,n.timeform)).then(function(e){o.timeFormModal=e}),e.fromTemplateUrl("views/modal/bookscan.html",t(o,n.scan)).then(function(e){o.bookScanModal=e}),e.fromTemplateUrl("views/modal/booksearch.html",t(o,n.search)).then(function(e){o.bookSearchModal=e}),e.fromTemplateUrl("views/modal/bookentry.html",t(o,n.bookform)).then(function(e){o.bookEntryModal=e}),o.$on("$destroy",function(){o.stopWatchModal.remove(),o.timerModal.remove(),o.timeFormModal.remove(),o.bookScanModal.remove(),o.bookSearchModal.remove(),o.bookEntryModal.remove()}),o.$on("modal.shown",function(e,t){switch(t.id){case n.stopwatch:o.$broadcast("stopwatch-shown");break;case n.timer:o.$broadcast("timer-shown")}})}function n(o,e,t){switch(e){case t.timer:o.timerModal.show();break;case t.stopwatch:o.stopWatchModal.show();break;case t.timeform:o.timeFormModal.show();break;case t.scan:o.bookScanModal.show();break;case t.search:o.bookSearchModal.show();break;case t.bookform:o.bookEntryModal.show()}}angular.module("app.readnow",[]).controller("appReadNow",o),o.$inject=["$scope","$ionicModal","$ionicPopup","appFireBaseBookService","appGlobalConfigService","$state","$stateParams","$ionicHistory","appUserService"]}();
!function(){"use strict";function n(n,a,o){var e=this;e.showPicker=!1,e.avartars=["animal-icon-cow.png","animal-icon-crab.png","animal-icon-dog.png","animal-icon-donkey.png","animal-icon-frog.png","animal-icon-gold-fish.png","animal-icon-horse.png","animal-icon-jellyfish.png","animal-icon-kitten-cat.png","animal-icon-mouse.png","animal-icon-octopus.png","animal-icon-puppy-dog.png","animal-icon-shark.png","animal-icon-squirrel.png","animal-icon-tuna-blue-fish.png"],e.setCurrentUserInfo=function(n){e.user=n},a.getUserInfo().then(function(n){null===n?e.useranonymous=!0:(e.useranonymous=a.isInAnonymousMode(n),a.setDefaultAvartar(n)),e.setCurrentUserInfo(n)},function(n){e.useranonymous=!0}),e.saveUserInfo=function(){var i={username:e.user.username,avartar:e.user.avartar||"icon.png"};a.saveUserInfo(i).then(function(){n.$broadcast("user-changed",e.user),o.go("app.booklogform")})},e.toggleImagePicker=function(){e.showPicker=!e.showPicker},e.setAvartar=function(n){e.user.avartar=n,e.showPicker=!1}}angular.module("app.settings",[]).controller("appSettings",n),n.$inject=["$rootScope","appUserService","$state"]}();
!function(){"use strict";function e(e,n){var t=this;n.getUserInfo().then(function(e){n.setDefaultAvartar(e),t.user=e},function(){t.user=null}),e.$on("user-changed",function(e,u){n.setDefaultAvartar(u),t.user=u})}angular.module("app.sidemenu",[]).controller("appSideMenu",e),e.$inject=["$scope","appUserService"]}();
!function(){"use strict";function e(e,t,n,a,r,o){function u(e){var t,n=g.length,a=[];for(t=0;n>t;t++){var r=s(g[t],e);null!==r&&a.push(r)}return a}function s(e,t){var n=t.filter(function(t){return t.genre==e.value});if(n.length>0){var a=n.map(function(e){return e.timeRead}),r=a.reduce(function(e,t){return e+t});return{name:e.value,minutes:r}}return null}function l(e){var t,n,a,r,o=e.length,u=e.map(function(e){return new Date(e.dateRead)}),s=[];if(u=p(u),"weekly"==m.mode?r=m.weekselected:"monthly"==m.mode&&(r=m.monthselected),r){n=r.startDate,a=r.endDate,u=[n];for(var l=new Date(n.getTime());a>l;)u.push(new Date(l.setDate(l.getDate()+1)))}for(o=u.length,t=0;o>t;t++){var c=u[t],d=i(c,e);s.push(d)}return{dates:u,time:s}}function i(e,t){var n=0,a=t.filter(function(t){return new Date(t.dateRead).setHours(0,0,0,0)==e.setHours(0,0,0,0)});if(a&&a.length>0){var r=a.map(function(e){return e.timeRead});n=r.reduce(function(e,t){return e+t})}return n}function c(e){m.allBooksRead=e;var t=new Date(e[0].dateRead);d(t),f(e)}function d(e){m.weeks=a.getLastTwelveWeeks(e),m.months=a.getLastSixMonths(e),m.weeks.length>0&&(m.weekselected=m.weeks[0]),m.months.length>0&&(m.monthselected=m.months[0])}function f(e){0===e.length&&console.log("no books found. cannot chart");var t=e;m.books=t;var n=u(t),a=n.map(function(e){return e.name}),o=n.map(function(e){return e.minutes});m.chartGenreData={labels:a,data:[o]};var s=l(t),i=s.dates.map(function(e){return r("date")(e,"MM/dd")}),c=Math.floor(i.length/10),d=[];if(c>=1)for(var f=0;f<i.length;f++)f%c===0&&d.push(i[f]);else d=i;m.chartReadingData={labels:d,data:[s.time]}}function h(e){console.log(e)}var m=this,g=n.genres;m.mode="weekly",e.$on("newbooklogged",function(e,t){m.allBooksRead=t,f(t)});t.getBookLogsByUser();o.getUserInfo().then(function(e){null!==e&&t.getBookLogsByUser().$loaded().then(c,h)}),m.setTimeMode=function(e){m.mode=e,m.rechart()},m.rechart=function(){var e,t,n,a,r,o=angular.copy(m.allBooksRead);e="weekly"==m.mode?m.weekselected:m.monthselected,e&&(t=e.startDate,n=e.endDate,a=o.filter(function(e){return r=new Date(e.dateRead).setHours(0,0,0,0),r>=t.setHours(0,0,0,0)&&r<=n.setHours(0,0,0,0)}),f(a))};var p=function(e){return e.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])}}angular.module("app.stats",[]).controller("appStats",e),e.$inject=["$scope","appFireBaseBookService","appGlobalConfigService","appDateTimeService","$filter","appUserService"]}();
!function(){"use strict";function e(e,t,a){function s(e){var t,a,s,n,o=e,c=o.length,l=1,g=0,u=[],b={tickets:{available:6,max:20,base:5,img:"ticket"},stickers:{available:4,max:10,base:60,img:"goodjob"},stars:{available:4,img:"genre"},coins:{available:1,img:"coin",base:100}};for(t=0;c>t;t++)g+=o[t].timeRead,u.indexOf(o[t].genre)<0&&u.push(o[t].genre);l+=Math.floor(c/b.tickets.base),l=Math.min(b.tickets.max,l),a=1+Math.floor(g/b.stickers.base),s=u.length,c>b.coins.base&&(n=Math.ceil(c/b.coin.base)),r.totalLogs=c,r.toalMinutes=g,r.totalGenres=s,r.stars=i(s,b.stars),r.stickers=i(a,b.stickers),r.tickets=i(l,b.tickets),r.coins=i(n,b.coins)}function i(e,t){var a,s=[];for(a=0;e>a;a++)s.push({img:n(a,t.available,t.img),index:a});return s}function n(e,t,a){var s=e%t+1;return a+s+".png"}function o(e){throw e.message}var r=this;a.getUserInfo().then(function(e){null!==e&&t.getBookLogsByUser().$loaded().then(s,o)})}angular.module("app.treasure",[]).controller("appTreasure",e),e.$inject=["$scope","appFireBaseBookService","appUserService"]}();
!function(){"use strict";function e(e,o,n,t,r,a,i,l){function c(e){var o=e;if(h&&h.length){f.genreId=h;var n=d.filter(function(e){return s(e,f.genreId)});f.genreName=n&&n.length?n[0].name:"",o=e.filter(function(e){return e.genre===h})}angular.forEach(o,function(e){g(e)}),f.booklogs=o}function u(e){throw e.message}function g(e){var o=m.filter(function(o){return s(o,e.readingSel)}),n=d.filter(function(o){return s(o,e.genre)});e.authorStr=t.getBookAuthors(e.authors),e.timestamp=new Date(e.dateRead),e.readMannerName=o&&o.length?o[0].name:"Read By Myself",e.genreName=n&&n.length?n[0].name:"Non Fiction"}function s(e,o){return e.value===o}var f=this,d=r.genres,m=r.readWays,h=n.genreId;e.$on("newbooklogged",function(e,o){f.allBooksRead=o;try{c(o)}catch(n){f.error=n.message}}),t.getBookLogsByUser().$loaded().then(c,u),f.showFilterBar=function(){f.filterBarInstance=a.show({items:f.booklogs,update:function(e,o){f.booklogs=e}})},f.editLog=function(e){l.clearCache(),t.setCurrentBookEdit(e),o.go("app.booklogform",{edit:!0},{reload:!0})},f.removeLog=function(e){t.removeBookLog(e).then(function(e){},u)}}angular.module("app.viewall",["jett.ionic.filter.bar"]).controller("appViewAll",e),e.$inject=["$scope","$state","$stateParams","appFireBaseBookService","appGlobalConfigService","$ionicFilterBar","$timeout","$ionicHistory"]}();
!function(){"use strict";function e(e,t,a,n,r,o,i,s){function l(e){e!==k.timeFrame&&u(e)}function u(e){var a,n,r,o=new Date,s=o.getDay();k.timeFrame=e,e===v.lastWeek&&k.earliestDate?(a=i.getLastWeekDates(k.earliestDate),a&&(n=0===s?a.startDate.addDays(-6):a.startDate.addDays(1),k.timeDescription="Week Of "+t("date")(n,S))):(r=i.getLastSevenDays(),n=r.startDate,k.timeDescription=t("date")(n,S)+" to "+t("date")(r.endDate,S)),d(n,k.books||[])}function d(e,a){var n,r,o,i=[],s=[],l=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],u=0;for(k.booklogs=a,n=0;7>n&&(r=e.addDays(n),!(r>=new Date));n++)o=r.getDay(),i=m(a,r),i.length&&(u+=p(i)),i=i.map(c),0===i.length&&i.push({title:"",nonStarsArr:5,starsArr:0}),s.push({name:l[o],date:t("date")(r,S),books:i});k.booksReadWeekly=s,k.totalminutes=u}function g(e){var t=e;if(t&&t.length){var a=new Date(e[0].dateRead);k.earliestDate=a,k.books=e,u(k.timeFrame)}}function m(e,t){return e.filter(function(e){return new Date(e.dateRead).setHours(0,0,0,0)===t.setHours(0,0,0,0)})}function p(e){var t,a=0,n=e?e.length:0;for(t=0;n>t;t++)a+=e[t].timeRead;return a}function c(e){var t=e.readingSel?f(k.readWays,e.readingSel):k.readWays;return e.howIRead=t?t.name:k.readWays[0].name,e.starsArr=new Array(e.rating),e.nonStarsArr=new Array(5-e.rating),e.authors=n.getBookAuthors(e.authors),e}function f(e,t){var a=e.filter(function(e){return y(e,t)});return a.length>0?a[0]:e[0]}function y(e,t){return e.value===t}function D(e){throw e.message}function h(e){e.alert({title:"Email sent",template:"It may take a minute or 2 reaching your inbox. Try not to let it run into your spam box :)"})}var k=this,v={lastSevenDays:"last7days",lastWeek:"lastWeek"},S="MM/dd/yy";k.isMobileApp=!(window.location.origin.indexOf("http")>=0||window.location.origin.indexOf("https")>=0),k.genres=r.genres,k.readWays=r.readWays,k.timeFrame=v.lastSevenDays,o.getUserInfo().then(function(e){e&&(k.username=e.username,k.parentEmail=e.parentemail,n.getBookLogsByUser().$loaded().then(g,D))}),k.sendEmail=function(){if(k.parentEmail&&k.parentEmail.length){var e=document.getElementById("print-log").innerHTML;e=e.replace(/img/g,"http://readinglogapp.net/img"),s.sendEmail({MailTo:k.parentEmail,Subject:"Weekly Reading Report for "+k.username,Body:e}).then(function(){h(a)})}},k.getLogFor7Days=function(){l(v.lastSevenDays)},k.getLogForLastWeek=function(){l(v.lastWeek)}}angular.module("app.weeklylog",[]).controller("appWeeklyLog",e),e.$inject=["$scope","$filter","$ionicPopup","appFireBaseBookService","appGlobalConfigService","appUserService","appDateTimeService","appEmailService"]}();
!function(){"use strict";function o(o){var t=this;t.closeBookEntryModal=function(){t.title="",t.authorname="",o.bookEntryModal.hide()}}angular.module("app.bookEntry",[]).controller("appBookEntry",o),o.$inject=["$scope"]}();
!function(){"use strict";function o(o,c,e,i){}angular.module("app.bookscan",["app.services"]).controller("appBookScan",o),o.$inject=["$scope","$ionicPlatform","appGlobalConfigService","GoogleApiService"]}();
!function(){"use strict";function o(o,e,n,i){function t(){l.query="",l.searchResultTitles=[]}var l=this;e.constants.GoogleApiSearchType;l.query="",l.closebookSearchModal=function(){t(),l.bookInfo=null,o.bookSearchModal.hide()},l.clearSearch=function(){t()};var a=ionic.debounce(function(o){n.searchTitleOnly(o).then(function(o){var e=o.items;l.searchResultTitles=e.map(function(o){return{thumbnail:o.volumeInfo.imageLinks&&o.volumeInfo.imageLinks.smallThumbnail?o.volumeInfo.imageLinks.smallThumbnail:"img/missing.png",title:o.volumeInfo.title,authors:i.getBookAuthors(o.volumeInfo.authors),volumeInfo:o.volumeInfo}})})},500);l.getBookTitles=function(){a(l.query)},l.setBookTitleAndSearch=function(o){l.searchResultTitles=[],l.bookInfo=n.getBookInfo(o)}}angular.module("app.bookSearch",["app.services"]).controller("appBookSearch",o),o.$inject=["$scope","appGlobalConfigService","GoogleApiService","appFireBaseBookService"]}();
!function(){"use strict";angular.module("app.modals",["app.timeForm","app.timer","app.stopWatch","app.bookscan","app.bookSearch","app.bookEntry"])}();
!function(){"use strict";function t(t){var e=this;e.startTimer=function(){t.timerPaused?t.$broadcast("timer-resume"):t.$broadcast("timer-start"),t.timerRunning=!0},e.stopTimer=function(){t.$broadcast("timer-stop"),t.timerPaused=!0,t.timerRunning=!1},e.resetTimer=function(){t.$broadcast("timer-reset"),t.timerRunning=!1},t.$on("timer-stopped",function(t,o){e.timeInfo=o}),e.closeStopWatchModal=function(){e.stopTimer(),t.stopWatchModal.hide()},e.setTimeInfo=function(){e.stopTimer();var o=Math.ceil(e.timeInfo.seconds/60)+e.timeInfo.minutes;t.setReadingTimeInfo(o,e.timeInfo.hours),e.closeStopWatchModal()}}angular.module("app.stopWatch",[]).controller("appStopWatch",t),t.$inject=["$scope"]}();
!function(){"use strict";function e(e){var t=this;t.closeTimeFormModal=function(){e.timeFormModal.hide()},t.datePickerCallback=function(e){t.dateSelected=e},t.setTimeInfo=function(){var o=t.dateSelected?new Date(t.dateSelected):new Date;e.setReadingTimeInfo(t.minutes,0,o),t.closeTimeFormModal()}}angular.module("app.timeForm",[]).controller("appTimeForm",e),e.$inject=["$scope"]}();
!function(){"use strict";function o(o){var t=this,e=20;t.closeTimerModal=function(){o.timerModal.hide()},t.minutes=20,t.duration=60*(t.minutes||e),t.setDuration=function(){t.duration=60*(t.minutes||e)};var i=function(){t.ionTimerOpts.progressCircle.strokeColor="#3BCC3B",t.ionTimerOpts.text={color:"#3BCC3B"}};t.ionTimerOpts={autoStart:!1,text:{color:"#45ccce",size:"20px"},progressCircle:{backgroundColor:"#eaeaea",rounded:!0,clockwise:!1},events:{onComplete:i,onStart:function(){},onPause:function(o){t.timeRead=Math.ceil(o/60)},onStop:function(o){}}},t.toggleTimer=function(){var o=t.ionTimerOpts.controls.status();"STARTED"===o?t.ionTimerOpts.controls.pause():t.ionTimerOpts.controls.start()},t.stopTimer=function(){t.duration=60*(t.minutes||e),t.ionTimerOpts.controls.stop(),t.ionTimerOpts.progressCircle.strokeColor="#45ccce",t.ionTimerOpts.text={color:"#45ccce"}},t.setTimerInfo=function(){t.ionTimerOpts.controls.pause(),o.setReadingTimeInfo(t.timeRead),t.closeTimerModal()}}angular.module("app.timer",[]).controller("appTimer",o),o.$inject=["$scope"]}();
!function(){"use strict";angular.module("app.auth",["app.signup","app.forgetpassword"])}();
!function(){"use strict";function t(t,e,s){function r(t){n.msg=t}function o(t){n.msg=t.toString()}var n=this;n.requestNewPassword=function(){var t=s.resetPassword(n.user);t.then(r,o)}}angular.module("app.forgetpassword",[]).controller("appForgetPassword",t),t.$inject=["$scope","$state","appFireBaseAuthService"]}();
!function(){"use strict";function e(e,n,o,r){function t(e){r.saveCustomUserDataAndSetUser(a.user.email),n.go("app.booklogform")}function i(e){a.error=e.toString()}var a=this;a.doSignUp=function(){var e=o.signUpAndLogin(a.user);e.then(t,i)}}angular.module("app.signup",[]).controller("appSignup",e),e.$inject=["$scope","$state","appFireBaseAuthService","appUserService"]}();